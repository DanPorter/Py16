
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Python: module Py16progs</title>
<meta charset="utf-8">
</head><body bgcolor="#f0f0f8">

<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong>Py16progs</strong></big></big></font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial"><a href=".">index</a><br><a href="file:///C:/users/grp66007/dropbox/python/i16/py16/py16progs.py">c:\users\grp66007\dropbox\python\i16\py16\py16progs.py</a></font></td></tr></table>
    <p><tt>Module:&nbsp;I16&nbsp;Data&nbsp;analysis&nbsp;programs&nbsp;"Py16Progs.py"<br>
&nbsp;<br>
By&nbsp;Dan&nbsp;Porter,&nbsp;PhD<br>
Diamond<br>
2016<br>
&nbsp;<br>
Usage:&nbsp;<br>
******In&nbsp;Script********<br>
include&nbsp;the&nbsp;following&nbsp;lines&nbsp;at&nbsp;the&nbsp;top&nbsp;of&nbsp;your&nbsp;script<br>
&nbsp;<br>
import&nbsp;sys<br>
sys.path.insert(0,'/dls_sw/i16/software/python/Py16')&nbsp;#&nbsp;location&nbsp;of&nbsp;Py16Progs<br>
import&nbsp;Py16Progs&nbsp;as&nbsp;p16<br>
p16.filedir&nbsp;=&nbsp;'/dls/i16/data/2015/mt0000-1'&nbsp;#&nbsp;your&nbsp;experiment&nbsp;folder<br>
p16.savedir&nbsp;=&nbsp;''&nbsp;#&nbsp;where&nbsp;to&nbsp;save&nbsp;output<br>
&nbsp;<br>
#&nbsp;Use&nbsp;functions:<br>
p16.<a href="#-checkexp">checkexp</a>()<br>
num&nbsp;=&nbsp;p16.<a href="#-latest">latest</a>()<br>
d=&nbsp;p16.<a href="#-readscan">readscan</a>(num)<br>
p16.<a href="#-plotscan">plotscan</a>(num)<br>
p16.<a href="#-plotpil">plotpil</a>(num)<br>
&nbsp;<br>
******In&nbsp;Console*******<br>
Run&nbsp;the&nbsp;file&nbsp;in&nbsp;the&nbsp;current&nbsp;console:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;cd&nbsp;/dls_sw/i16/software/python/Py16/<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;ipython&nbsp;-i&nbsp;--matplotlib&nbsp;tk<br>
In&nbsp;the&nbsp;python&nbsp;console:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;import&nbsp;Py16progs&nbsp;as&nbsp;p16<br>
Change&nbsp;filedir:&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;p16.filedir&nbsp;=&nbsp;'/dls/i16/data/2015/cm12169-2/CsFeSe'&nbsp;#&nbsp;your&nbsp;experiment&nbsp;folder<br>
&nbsp;<br>
#&nbsp;Use&nbsp;functions:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;d=&nbsp;p16.<a href="#-readscan">readscan</a>(12345)&nbsp;#&nbsp;generate&nbsp;data&nbsp;structure&nbsp;for&nbsp;scan&nbsp;number&nbsp;12345<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;d.eta&nbsp;#&nbsp;returns&nbsp;scan&nbsp;data&nbsp;for&nbsp;eta&nbsp;psudo-device<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;d.metadata.Energy&nbsp;#&nbsp;returns&nbsp;metadata&nbsp;for&nbsp;scan&nbsp;(at&nbsp;start&nbsp;of&nbsp;scan)&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;p16.<a href="#-checkexp">checkexp</a>()&nbsp;#&nbsp;experiment&nbsp;dates&nbsp;+&nbsp;scans&nbsp;numbers<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&gt;&nbsp;num&nbsp;=&nbsp;p16.<a href="#-latest">latest</a>()&nbsp;#&nbsp;Latest&nbsp;scan&nbsp;number<br>
&nbsp;<br>
**********************<br>
Some&nbsp;Useful&nbsp;Functions:<br>
&nbsp;&nbsp;&nbsp;&nbsp;d&nbsp;=&nbsp;<a href="#-readscan">readscan</a>(num)&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;x,y,dy,varx,vary,ttl,d&nbsp;=&nbsp;<a href="#-getdata">getdata</a>(num/d,'varx','vary',save=None)<br>
&nbsp;&nbsp;&nbsp;&nbsp;x,y,z,varx,vary,varz,ttl&nbsp;=&nbsp;<a href="#-joindata">joindata</a>([nums],'varx','vary','varz')<br>
&nbsp;&nbsp;&nbsp;&nbsp;vol&nbsp;=&nbsp;<a href="#-getvol">getvol</a>(num)<br>
&nbsp;&nbsp;&nbsp;&nbsp;ROI_sum,ROI_maxval,ROI_bkg&nbsp;=&nbsp;<a href="#-pilroi">pilroi</a>(num,ROIcen,ROIsize,findpeak,peakregion)<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;=&nbsp;<a href="#-getmeta">getmeta</a>([nums],'Field')<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;num&nbsp;=&nbsp;<a href="#-latest">latest</a>()<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#-checkexp">checkexp</a>()<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#-checkscan">checkscan</a>(num1=None,num2=None)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#-checklog">checklog</a>(time=None,mins=2,cmd=False)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#-prend">prend</a>(start,end)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#-polflip">polflip</a>(sigsig,sigpi,fit='Gauss',output=False)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#-metaprint">metaprint</a>(d1,d2=None)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#-savedata">savedata</a>(num/d,'varx','vary')<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#-plotscan">plotscan</a>(num=None,vary='',fit=None,save=None)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#-plotpil">plotpil</a>(num,cax=None,imnum=None)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#-plotscans3D">plotscans3D</a>(scans,depvar='Ta',vary='',save=None)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;fit,err&nbsp;=&nbsp;<a href="#-fit_scans">fit_scans</a>(scans,depvar='Ta',vary='',save=None)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;out,err&nbsp;=&nbsp;<a href="#-peakfit">peakfit</a>(x,y,dy,type='dVoight')<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;HHH,KKK,LLL&nbsp;=&nbsp;<a href="#-pixel2hkl">pixel2hkl</a>(num)<br>
&nbsp;&nbsp;&nbsp;&nbsp;XXX,YYY,ZZZ&nbsp;=&nbsp;<a href="#-pixel2xyz">pixel2xyz</a>(num)<br>
&nbsp;&nbsp;&nbsp;&nbsp;TTH,INT&nbsp;=&nbsp;<a href="#-pixel2tth">pixel2tth</a>(num)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;ROIcen_ij,ROIcen_frame&nbsp;=&nbsp;<a href="#-pilpeak">pilpeak</a>(Y,test&nbsp;=&nbsp;1,disp=False)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#-ispeak">ispeak</a>(Y,test&nbsp;=&nbsp;1,disp=False)<br>
&nbsp;&nbsp;&nbsp;&nbsp;peak&nbsp;=&nbsp;<a href="#-peakfind">peakfind</a>(Y,cutoff=0.01)*<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#-labels">labels</a>(title,xlabel,ylabel,zlabel)<br>
&nbsp;&nbsp;&nbsp;&nbsp;vals&nbsp;=&nbsp;<a href="#-frange">frange</a>(start,stop=None,step=1)<br>
&nbsp;&nbsp;&nbsp;&nbsp;str&nbsp;=&nbsp;<a href="#-stfm">stfm</a>(val,err)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;<br>
Version&nbsp;3.2<br>
Last&nbsp;updated:&nbsp;23/10/17<br>
&nbsp;<br>
Version&nbsp;History:<br>
07/02/16&nbsp;0.9&nbsp;&nbsp;&nbsp;&nbsp;Program&nbsp;created&nbsp;from&nbsp;DansI16progs.py&nbsp;V3.0<br>
18/02/16&nbsp;1.0&nbsp;&nbsp;&nbsp;&nbsp;Functions&nbsp;renamed,&nbsp;readscan&nbsp;updated&nbsp;for&nbsp;errors,&nbsp;simplifications&nbsp;to&nbsp;outputs<br>
03/03/16&nbsp;1.1&nbsp;&nbsp;&nbsp;&nbsp;Tested&nbsp;on&nbsp;Beamline,&nbsp;removed&nbsp;errors,&nbsp;cleaned&nbsp;up<br>
08/03/16&nbsp;1.2&nbsp;&nbsp;&nbsp;&nbsp;Refinements&nbsp;after&nbsp;a&nbsp;week&nbsp;of&nbsp;beamline&nbsp;use<br>
15/04/16&nbsp;1.3&nbsp;&nbsp;&nbsp;&nbsp;New&nbsp;masks&nbsp;method&nbsp;in&nbsp;peak_fit<br>
05/05/16&nbsp;1.4&nbsp;&nbsp;&nbsp;&nbsp;Fixed&nbsp;bug&nbsp;that&nbsp;did&nbsp;integer&nbsp;normalisation&nbsp;of&nbsp;APD/counttime<br>
10/05/16&nbsp;1.5&nbsp;&nbsp;&nbsp;&nbsp;Added&nbsp;print&nbsp;buffer&nbsp;function<br>
19/05/16&nbsp;1.6&nbsp;&nbsp;&nbsp;&nbsp;Fixed&nbsp;3D&nbsp;plotting&nbsp;bugs,&nbsp;new&nbsp;outputs&nbsp;on&nbsp;fit_scans,&nbsp;catch&nbsp;psi='unavailable'&nbsp;bug&nbsp;(psi=0)<br>
12/07/16&nbsp;1.7&nbsp;&nbsp;&nbsp;&nbsp;Ungraded&nbsp;peakfit&nbsp;with&nbsp;variable&nbsp;backgrouns,&nbsp;estimate&nbsp;input&nbsp;and&nbsp;new&nbsp;default&nbsp;values.<br>
10/08/16&nbsp;1.8&nbsp;&nbsp;&nbsp;&nbsp;Added&nbsp;logplot&nbsp;and&nbsp;diffplot&nbsp;options&nbsp;to&nbsp;plotscan<br>
08/09/16&nbsp;1.9&nbsp;&nbsp;&nbsp;&nbsp;Generalised&nbsp;getvol&nbsp;for&nbsp;any&nbsp;detector&nbsp;by&nbsp;pre-loading&nbsp;the&nbsp;first&nbsp;image<br>
21/09/16&nbsp;2.0&nbsp;&nbsp;&nbsp;&nbsp;Removed&nbsp;dnp.io.load.&nbsp;New&nbsp;title&nbsp;includes&nbsp;folder&nbsp;and&nbsp;new&nbsp;functions&nbsp;for&nbsp;lists&nbsp;of&nbsp;scan&nbsp;numbers<br>
07/10/16&nbsp;2.1&nbsp;&nbsp;&nbsp;&nbsp;Ordered&nbsp;keys&nbsp;in&nbsp;dataloader,&nbsp;some&nbsp;minor&nbsp;fixes<br>
17/10/16&nbsp;2.2&nbsp;&nbsp;&nbsp;&nbsp;Improved&nbsp;ROI&nbsp;functionality&nbsp;-&nbsp;_sfm&nbsp;to&nbsp;remove&nbsp;first&nbsp;frame<br>
14/12/16&nbsp;2.3&nbsp;&nbsp;&nbsp;&nbsp;Improved&nbsp;multiscan&nbsp;titles,&nbsp;funtions&nbsp;to&nbsp;write&nbsp;+&nbsp;load&nbsp;previous&nbsp;experiment&nbsp;directories&nbsp;for&nbsp;fast&nbsp;access<br>
20/12/16&nbsp;2.4&nbsp;&nbsp;&nbsp;&nbsp;Added&nbsp;checkscans&nbsp;and&nbsp;auto_varx/vary&nbsp;functions,&nbsp;added&nbsp;dont_normalise&nbsp;for&nbsp;none-normalisable&nbsp;values<br>
02/02/17&nbsp;2.5&nbsp;&nbsp;&nbsp;&nbsp;Added&nbsp;checkhkl&nbsp;and&nbsp;checkwl.&nbsp;Bugs&nbsp;fixed&nbsp;when&nbsp;using&nbsp;DifCalc&nbsp;(psi+azih&nbsp;not&nbsp;recorded)<br>
22/02/17&nbsp;2.6&nbsp;&nbsp;&nbsp;&nbsp;Added&nbsp;dead&nbsp;pixel&nbsp;mask&nbsp;for&nbsp;pilatus&nbsp;for&nbsp;experiments&nbsp;in&nbsp;Feb&nbsp;2017<br>
13/06/17&nbsp;2.7&nbsp;&nbsp;&nbsp;&nbsp;Added&nbsp;<a href="#-getmeta">getmeta</a>()&nbsp;function<br>
24/07/17&nbsp;2.8&nbsp;&nbsp;&nbsp;&nbsp;Added&nbsp;d.metadata.hkl_str,&nbsp;fixing&nbsp;incorrect&nbsp;position&nbsp;bug.&nbsp;Various&nbsp;other&nbsp;fixes.<br>
01/08/17&nbsp;2.9&nbsp;&nbsp;&nbsp;&nbsp;Added&nbsp;check&nbsp;for&nbsp;large&nbsp;pilatus&nbsp;arrays.<br>
02/10/17&nbsp;2.9&nbsp;&nbsp;&nbsp;&nbsp;Added&nbsp;various&nbsp;misc&nbsp;functions,&nbsp;other&nbsp;bugs&nbsp;fixed<br>
06/10/17&nbsp;3.0&nbsp;&nbsp;&nbsp;&nbsp;Added&nbsp;pixel2hkl&nbsp;functions,&nbsp;incluing&nbsp;plots,&nbsp;other&nbsp;bug&nbsp;fixes<br>
17/10/17&nbsp;3.1&nbsp;&nbsp;&nbsp;&nbsp;Added&nbsp;choice&nbsp;of&nbsp;temperature&nbsp;sensor,&nbsp;d.metadata.temperature<br>
23/10/17&nbsp;3.2&nbsp;&nbsp;&nbsp;&nbsp;Added&nbsp;new&nbsp;plotting&nbsp;features,&nbsp;better&nbsp;multi-dimensional&nbsp;fits<br>
&nbsp;<br>
###FEEDBACK###&nbsp;Please&nbsp;submit&nbsp;your&nbsp;bug&nbsp;reports,&nbsp;feature&nbsp;requests&nbsp;or&nbsp;queries&nbsp;to:&nbsp;dan.porter@diamond.ac.uk<br>
&nbsp;<br>
@author:&nbsp;Dan&nbsp;Porter<br>
I16,&nbsp;Diamond&nbsp;Light&nbsp;Source<br>
2016</tt></p>
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="datetime.html">datetime</a><br>
<a href="glob.html">glob</a><br>
<a href="scipy.misc.html">scipy.misc</a><br>
</td><td width="25%" valign=top><a href="matplotlib.ticker.html">matplotlib.ticker</a><br>
<a href="numpy.html">numpy</a><br>
<a href="os.html">os</a><br>
</td><td width="25%" valign=top><a href="matplotlib.pyplot.html">matplotlib.pyplot</a><br>
<a href="re.html">re</a><br>
<a href="sys.html">sys</a><br>
</td><td width="25%" valign=top><a href="tempfile.html">tempfile</a><br>
<a href="time.html">time</a><br>
</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ee77aa">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Classes</strong></big></font></td></tr>
    
<tr><td bgcolor="#ee77aa"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl>
<dt><font face="helvetica, arial"><a href="collections.html#OrderedDict">collections.OrderedDict</a>(<a href="__builtin__.html#dict">__builtin__.dict</a>)
</font></dt><dd>
<dl>
<dt><font face="helvetica, arial"><a href="Py16progs.html#dict2obj">dict2obj</a>
</font></dt></dl>
</dd>
</dl>
 <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="dict2obj">class <strong>dict2obj</strong></a>(<a href="collections.html#OrderedDict">collections.OrderedDict</a>)</font></td></tr>
    
<tr bgcolor="#ffc8d8"><td rowspan=2><tt>&nbsp;&nbsp;&nbsp;</tt></td>
<td colspan=2><tt>Convert&nbsp;dictionary&nbsp;object&nbsp;to&nbsp;class&nbsp;instance<br>&nbsp;</tt></td></tr>
<tr><td>&nbsp;</td>
<td width="100%"><dl><dt>Method resolution order:</dt>
<dd><a href="Py16progs.html#dict2obj">dict2obj</a></dd>
<dd><a href="collections.html#OrderedDict">collections.OrderedDict</a></dd>
<dd><a href="__builtin__.html#dict">__builtin__.dict</a></dd>
<dd><a href="__builtin__.html#object">__builtin__.object</a></dd>
</dl>
<hr>
Methods defined here:<br>
<dl><dt><a name="dict2obj-__init__"><strong>__init__</strong></a>(self, dictvals, order<font color="#909090">=None</font>)</dt></dl>

<hr>
Methods inherited from <a href="collections.html#OrderedDict">collections.OrderedDict</a>:<br>
<dl><dt><a name="dict2obj-__delitem__"><strong>__delitem__</strong></a>(self, key, dict_delitem<font color="#909090">=&lt;slot wrapper '__delitem__' of 'dict' objects&gt;</font>)</dt><dd><tt>od.<a href="#dict2obj-__delitem__">__delitem__</a>(y)&nbsp;&lt;==&gt;&nbsp;del&nbsp;od[y]</tt></dd></dl>

<dl><dt><a name="dict2obj-__eq__"><strong>__eq__</strong></a>(self, other)</dt><dd><tt>od.<a href="#dict2obj-__eq__">__eq__</a>(y)&nbsp;&lt;==&gt;&nbsp;od==y.&nbsp;&nbsp;Comparison&nbsp;to&nbsp;another&nbsp;OD&nbsp;is&nbsp;order-sensitive<br>
while&nbsp;comparison&nbsp;to&nbsp;a&nbsp;regular&nbsp;mapping&nbsp;is&nbsp;order-insensitive.</tt></dd></dl>

<dl><dt><a name="dict2obj-__iter__"><strong>__iter__</strong></a>(self)</dt><dd><tt>od.<a href="#dict2obj-__iter__">__iter__</a>()&nbsp;&lt;==&gt;&nbsp;iter(od)</tt></dd></dl>

<dl><dt><a name="dict2obj-__ne__"><strong>__ne__</strong></a>(self, other)</dt><dd><tt>od.<a href="#dict2obj-__ne__">__ne__</a>(y)&nbsp;&lt;==&gt;&nbsp;od!=y</tt></dd></dl>

<dl><dt><a name="dict2obj-__reduce__"><strong>__reduce__</strong></a>(self)</dt><dd><tt>Return&nbsp;state&nbsp;information&nbsp;for&nbsp;pickling</tt></dd></dl>

<dl><dt><a name="dict2obj-__repr__"><strong>__repr__</strong></a>(self, _repr_running<font color="#909090">={}</font>)</dt><dd><tt>od.<a href="#dict2obj-__repr__">__repr__</a>()&nbsp;&lt;==&gt;&nbsp;repr(od)</tt></dd></dl>

<dl><dt><a name="dict2obj-__reversed__"><strong>__reversed__</strong></a>(self)</dt><dd><tt>od.<a href="#dict2obj-__reversed__">__reversed__</a>()&nbsp;&lt;==&gt;&nbsp;reversed(od)</tt></dd></dl>

<dl><dt><a name="dict2obj-__setitem__"><strong>__setitem__</strong></a>(self, key, value, dict_setitem<font color="#909090">=&lt;slot wrapper '__setitem__' of 'dict' objects&gt;</font>)</dt><dd><tt>od.<a href="#dict2obj-__setitem__">__setitem__</a>(i,&nbsp;y)&nbsp;&lt;==&gt;&nbsp;od[i]=y</tt></dd></dl>

<dl><dt><a name="dict2obj-clear"><strong>clear</strong></a>(self)</dt><dd><tt>od.<a href="#dict2obj-clear">clear</a>()&nbsp;-&gt;&nbsp;None.&nbsp;&nbsp;Remove&nbsp;all&nbsp;items&nbsp;from&nbsp;od.</tt></dd></dl>

<dl><dt><a name="dict2obj-copy"><strong>copy</strong></a>(self)</dt><dd><tt>od.<a href="#dict2obj-copy">copy</a>()&nbsp;-&gt;&nbsp;a&nbsp;shallow&nbsp;copy&nbsp;of&nbsp;od</tt></dd></dl>

<dl><dt><a name="dict2obj-items"><strong>items</strong></a>(self)</dt><dd><tt>od.<a href="#dict2obj-items">items</a>()&nbsp;-&gt;&nbsp;list&nbsp;of&nbsp;(key,&nbsp;value)&nbsp;pairs&nbsp;in&nbsp;od</tt></dd></dl>

<dl><dt><a name="dict2obj-iteritems"><strong>iteritems</strong></a>(self)</dt><dd><tt>od.iteritems&nbsp;-&gt;&nbsp;an&nbsp;iterator&nbsp;over&nbsp;the&nbsp;(key,&nbsp;value)&nbsp;pairs&nbsp;in&nbsp;od</tt></dd></dl>

<dl><dt><a name="dict2obj-iterkeys"><strong>iterkeys</strong></a>(self)</dt><dd><tt>od.<a href="#dict2obj-iterkeys">iterkeys</a>()&nbsp;-&gt;&nbsp;an&nbsp;iterator&nbsp;over&nbsp;the&nbsp;keys&nbsp;in&nbsp;od</tt></dd></dl>

<dl><dt><a name="dict2obj-itervalues"><strong>itervalues</strong></a>(self)</dt><dd><tt>od.itervalues&nbsp;-&gt;&nbsp;an&nbsp;iterator&nbsp;over&nbsp;the&nbsp;values&nbsp;in&nbsp;od</tt></dd></dl>

<dl><dt><a name="dict2obj-keys"><strong>keys</strong></a>(self)</dt><dd><tt>od.<a href="#dict2obj-keys">keys</a>()&nbsp;-&gt;&nbsp;list&nbsp;of&nbsp;keys&nbsp;in&nbsp;od</tt></dd></dl>

<dl><dt><a name="dict2obj-pop"><strong>pop</strong></a>(self, key, default<font color="#909090">=&lt;object object&gt;</font>)</dt><dd><tt>od.<a href="#dict2obj-pop">pop</a>(k[,d])&nbsp;-&gt;&nbsp;v,&nbsp;remove&nbsp;specified&nbsp;key&nbsp;and&nbsp;return&nbsp;the&nbsp;corresponding<br>
value.&nbsp;&nbsp;If&nbsp;key&nbsp;is&nbsp;not&nbsp;found,&nbsp;d&nbsp;is&nbsp;returned&nbsp;if&nbsp;given,&nbsp;otherwise&nbsp;KeyError<br>
is&nbsp;raised.</tt></dd></dl>

<dl><dt><a name="dict2obj-popitem"><strong>popitem</strong></a>(self, last<font color="#909090">=True</font>)</dt><dd><tt>od.<a href="#dict2obj-popitem">popitem</a>()&nbsp;-&gt;&nbsp;(k,&nbsp;v),&nbsp;return&nbsp;and&nbsp;remove&nbsp;a&nbsp;(key,&nbsp;value)&nbsp;pair.<br>
Pairs&nbsp;are&nbsp;returned&nbsp;in&nbsp;LIFO&nbsp;order&nbsp;if&nbsp;last&nbsp;is&nbsp;true&nbsp;or&nbsp;FIFO&nbsp;order&nbsp;if&nbsp;false.</tt></dd></dl>

<dl><dt><a name="dict2obj-setdefault"><strong>setdefault</strong></a>(self, key, default<font color="#909090">=None</font>)</dt><dd><tt>od.<a href="#dict2obj-setdefault">setdefault</a>(k[,d])&nbsp;-&gt;&nbsp;od.<a href="#dict2obj-get">get</a>(k,d),&nbsp;also&nbsp;set&nbsp;od[k]=d&nbsp;if&nbsp;k&nbsp;not&nbsp;in&nbsp;od</tt></dd></dl>

<dl><dt><a name="dict2obj-update"><strong>update</strong></a>(*args, **kwds)</dt><dd><tt>D.<a href="#dict2obj-update">update</a>([E,&nbsp;]**F)&nbsp;-&gt;&nbsp;None.&nbsp;&nbsp;Update&nbsp;D&nbsp;from&nbsp;mapping/iterable&nbsp;E&nbsp;and&nbsp;F.<br>
If&nbsp;E&nbsp;present&nbsp;and&nbsp;has&nbsp;a&nbsp;.<a href="#dict2obj-keys">keys</a>()&nbsp;method,&nbsp;does:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;k&nbsp;in&nbsp;E:&nbsp;D[k]&nbsp;=&nbsp;E[k]<br>
If&nbsp;E&nbsp;present&nbsp;and&nbsp;lacks&nbsp;.<a href="#dict2obj-keys">keys</a>()&nbsp;method,&nbsp;does:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(k,&nbsp;v)&nbsp;in&nbsp;E:&nbsp;D[k]&nbsp;=&nbsp;v<br>
In&nbsp;either&nbsp;case,&nbsp;this&nbsp;is&nbsp;followed&nbsp;by:&nbsp;for&nbsp;k,&nbsp;v&nbsp;in&nbsp;F.<a href="#dict2obj-items">items</a>():&nbsp;D[k]&nbsp;=&nbsp;v</tt></dd></dl>

<dl><dt><a name="dict2obj-values"><strong>values</strong></a>(self)</dt><dd><tt>od.<a href="#dict2obj-values">values</a>()&nbsp;-&gt;&nbsp;list&nbsp;of&nbsp;values&nbsp;in&nbsp;od</tt></dd></dl>

<dl><dt><a name="dict2obj-viewitems"><strong>viewitems</strong></a>(self)</dt><dd><tt>od.<a href="#dict2obj-viewitems">viewitems</a>()&nbsp;-&gt;&nbsp;a&nbsp;set-like&nbsp;object&nbsp;providing&nbsp;a&nbsp;view&nbsp;on&nbsp;od's&nbsp;items</tt></dd></dl>

<dl><dt><a name="dict2obj-viewkeys"><strong>viewkeys</strong></a>(self)</dt><dd><tt>od.<a href="#dict2obj-viewkeys">viewkeys</a>()&nbsp;-&gt;&nbsp;a&nbsp;set-like&nbsp;object&nbsp;providing&nbsp;a&nbsp;view&nbsp;on&nbsp;od's&nbsp;keys</tt></dd></dl>

<dl><dt><a name="dict2obj-viewvalues"><strong>viewvalues</strong></a>(self)</dt><dd><tt>od.<a href="#dict2obj-viewvalues">viewvalues</a>()&nbsp;-&gt;&nbsp;an&nbsp;object&nbsp;providing&nbsp;a&nbsp;view&nbsp;on&nbsp;od's&nbsp;values</tt></dd></dl>

<hr>
Class methods inherited from <a href="collections.html#OrderedDict">collections.OrderedDict</a>:<br>
<dl><dt><a name="dict2obj-fromkeys"><strong>fromkeys</strong></a>(cls, iterable, value<font color="#909090">=None</font>)<font color="#909090"><font face="helvetica, arial"> from <a href="__builtin__.html#type">__builtin__.type</a></font></font></dt><dd><tt>OD.<a href="#dict2obj-fromkeys">fromkeys</a>(S[,&nbsp;v])&nbsp;-&gt;&nbsp;New&nbsp;ordered&nbsp;dictionary&nbsp;with&nbsp;keys&nbsp;from&nbsp;S.<br>
If&nbsp;not&nbsp;specified,&nbsp;the&nbsp;value&nbsp;defaults&nbsp;to&nbsp;None.</tt></dd></dl>

<hr>
Data descriptors inherited from <a href="collections.html#OrderedDict">collections.OrderedDict</a>:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><tt>dictionary&nbsp;for&nbsp;instance&nbsp;variables&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><tt>list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
<hr>
Methods inherited from <a href="__builtin__.html#dict">__builtin__.dict</a>:<br>
<dl><dt><a name="dict2obj-__cmp__"><strong>__cmp__</strong></a>(...)</dt><dd><tt>x.<a href="#dict2obj-__cmp__">__cmp__</a>(y)&nbsp;&lt;==&gt;&nbsp;cmp(x,y)</tt></dd></dl>

<dl><dt><a name="dict2obj-__contains__"><strong>__contains__</strong></a>(...)</dt><dd><tt>D.<a href="#dict2obj-__contains__">__contains__</a>(k)&nbsp;-&gt;&nbsp;True&nbsp;if&nbsp;D&nbsp;has&nbsp;a&nbsp;key&nbsp;k,&nbsp;else&nbsp;False</tt></dd></dl>

<dl><dt><a name="dict2obj-__ge__"><strong>__ge__</strong></a>(...)</dt><dd><tt>x.<a href="#dict2obj-__ge__">__ge__</a>(y)&nbsp;&lt;==&gt;&nbsp;x&gt;=y</tt></dd></dl>

<dl><dt><a name="dict2obj-__getattribute__"><strong>__getattribute__</strong></a>(...)</dt><dd><tt>x.<a href="#dict2obj-__getattribute__">__getattribute__</a>('name')&nbsp;&lt;==&gt;&nbsp;x.name</tt></dd></dl>

<dl><dt><a name="dict2obj-__getitem__"><strong>__getitem__</strong></a>(...)</dt><dd><tt>x.<a href="#dict2obj-__getitem__">__getitem__</a>(y)&nbsp;&lt;==&gt;&nbsp;x[y]</tt></dd></dl>

<dl><dt><a name="dict2obj-__gt__"><strong>__gt__</strong></a>(...)</dt><dd><tt>x.<a href="#dict2obj-__gt__">__gt__</a>(y)&nbsp;&lt;==&gt;&nbsp;x&gt;y</tt></dd></dl>

<dl><dt><a name="dict2obj-__le__"><strong>__le__</strong></a>(...)</dt><dd><tt>x.<a href="#dict2obj-__le__">__le__</a>(y)&nbsp;&lt;==&gt;&nbsp;x&lt;=y</tt></dd></dl>

<dl><dt><a name="dict2obj-__len__"><strong>__len__</strong></a>(...)</dt><dd><tt>x.<a href="#dict2obj-__len__">__len__</a>()&nbsp;&lt;==&gt;&nbsp;len(x)</tt></dd></dl>

<dl><dt><a name="dict2obj-__lt__"><strong>__lt__</strong></a>(...)</dt><dd><tt>x.<a href="#dict2obj-__lt__">__lt__</a>(y)&nbsp;&lt;==&gt;&nbsp;x&lt;y</tt></dd></dl>

<dl><dt><a name="dict2obj-__sizeof__"><strong>__sizeof__</strong></a>(...)</dt><dd><tt>D.<a href="#dict2obj-__sizeof__">__sizeof__</a>()&nbsp;-&gt;&nbsp;size&nbsp;of&nbsp;D&nbsp;in&nbsp;memory,&nbsp;in&nbsp;bytes</tt></dd></dl>

<dl><dt><a name="dict2obj-get"><strong>get</strong></a>(...)</dt><dd><tt>D.<a href="#dict2obj-get">get</a>(k[,d])&nbsp;-&gt;&nbsp;D[k]&nbsp;if&nbsp;k&nbsp;in&nbsp;D,&nbsp;else&nbsp;d.&nbsp;&nbsp;d&nbsp;defaults&nbsp;to&nbsp;None.</tt></dd></dl>

<dl><dt><a name="dict2obj-has_key"><strong>has_key</strong></a>(...)</dt><dd><tt>D.<a href="#dict2obj-has_key">has_key</a>(k)&nbsp;-&gt;&nbsp;True&nbsp;if&nbsp;D&nbsp;has&nbsp;a&nbsp;key&nbsp;k,&nbsp;else&nbsp;False</tt></dd></dl>

<hr>
Data and other attributes inherited from <a href="__builtin__.html#dict">__builtin__.dict</a>:<br>
<dl><dt><strong>__hash__</strong> = None</dl>

<dl><dt><strong>__new__</strong> = &lt;built-in method __new__ of type object&gt;<dd><tt>T.<a href="#dict2obj-__new__">__new__</a>(S,&nbsp;...)&nbsp;-&gt;&nbsp;a&nbsp;new&nbsp;object&nbsp;with&nbsp;type&nbsp;S,&nbsp;a&nbsp;subtype&nbsp;of&nbsp;T</tt></dl>

</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#eeaa77">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Functions</strong></big></font></td></tr>
    
<tr><td bgcolor="#eeaa77"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl><dt><a name="-FWHM"><strong>FWHM</strong></a>(x, y, interpolate<font color="#909090">=False</font>)</dt><dd><tt>Calculate&nbsp;a&nbsp;simple&nbsp;FWHM&nbsp;from&nbsp;a&nbsp;peak</tt></dd></dl>
 <dl><dt><a name="-abscor"><strong>abscor</strong></a>(eta<font color="#909090">=0</font>, chi<font color="#909090">=90</font>, delta<font color="#909090">=0</font>, mu<font color="#909090">=0</font>, gamma<font color="#909090">=0</font>, u<font color="#909090">=1.0</font>, disp<font color="#909090">=False</font>, plot<font color="#909090">=False</font>)</dt><dd><tt>Calculate&nbsp;absorption&nbsp;correction<br>
&nbsp;A&nbsp;=&nbsp;<a href="#-abscor">abscor</a>(eta,chi,delta,mu,gamma,u,&nbsp;disp,&nbsp;plot)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eta/chi/delta/mu/gamma&nbsp;=&nbsp;diffractometer&nbsp;angles<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;u&nbsp;=&nbsp;absoprtion&nbsp;coefficient<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;disp&nbsp;=&nbsp;True/False&nbsp;-&nbsp;display&nbsp;information<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plot&nbsp;=&nbsp;True/False&nbsp;-&nbsp;plot&nbsp;diffractometer/sample&nbsp;orientation<br>
&nbsp;<br>
Usage:<br>
&nbsp;&nbsp;&nbsp;&nbsp;scans&nbsp;=&nbsp;range(584448,584481,1)<br>
&nbsp;&nbsp;&nbsp;&nbsp;eta&nbsp;=&nbsp;<a href="#-getmeta">getmeta</a>(scans,'eta')<br>
&nbsp;&nbsp;&nbsp;&nbsp;delta&nbsp;=&nbsp;<a href="#-getmeta">getmeta</a>(scans,'delta')<br>
&nbsp;&nbsp;&nbsp;&nbsp;chi&nbsp;=&nbsp;<a href="#-getmeta">getmeta</a>(scans,'chi')<br>
&nbsp;&nbsp;&nbsp;&nbsp;A=np.zeros(len(eta))<br>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;n&nbsp;in&nbsp;range(len(eta)):&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A[n]&nbsp;=&nbsp;<a href="#-abscor">abscor</a>(eta[n]-4.41,&nbsp;chi[n]+2.43,&nbsp;delta[n],disp=True)<br>
&nbsp;&nbsp;&nbsp;&nbsp;Icorrected&nbsp;=&nbsp;Iexp/A<br>
&nbsp;<br>
&nbsp;From:&nbsp;IT-C&nbsp;Secion&nbsp;6.3.3&nbsp;Absorption&nbsp;corrections<br>
&nbsp;Table&nbsp;6.3.3.1.&nbsp;(1)&nbsp;Reflection&nbsp;from&nbsp;a&nbsp;crystal&nbsp;slab&nbsp;with&nbsp;negligible&nbsp;transmission<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;=&nbsp;sin(theta&nbsp;-&nbsp;phi)&nbsp;/&nbsp;mu(&nbsp;sin(theta-phi)&nbsp;+&nbsp;sin(theta+phi)&nbsp;)<br>
&nbsp;<br>
&nbsp;A&nbsp;=&nbsp;Transmission&nbsp;coefficient.&nbsp;(Absorption&nbsp;correction&nbsp;A*=1/A)&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"The&nbsp;reduction&nbsp;in&nbsp;the&nbsp;intensity&nbsp;of&nbsp;an&nbsp;x-ray&nbsp;reflection"&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Iobs&nbsp;=&nbsp;A*Iorig<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Icorrected&nbsp;=&nbsp;Iobs/A<br>
&nbsp;theta&nbsp;=&nbsp;Bragg&nbsp;angle<br>
&nbsp;phi&nbsp;=&nbsp;"the&nbsp;crystal&nbsp;planes&nbsp;are&nbsp;inclined&nbsp;at&nbsp;an&nbsp;angle&nbsp;phi&nbsp;to&nbsp;the&nbsp;extended&nbsp;face&nbsp;and&nbsp;the&nbsp;normal&nbsp;in&nbsp;the&nbsp;plane&nbsp;of&nbsp;the&nbsp;incidnend&nbsp;and&nbsp;diffracted&nbsp;beams"<br>
&nbsp;mu&nbsp;=&nbsp;absorption&nbsp;coefficient</tt></dd></dl>
 <dl><dt><a name="-auto_varx"><strong>auto_varx</strong></a>(num)</dt><dd><tt>Determine&nbsp;the&nbsp;scanned&nbsp;variable</tt></dd></dl>
 <dl><dt><a name="-auto_vary"><strong>auto_vary</strong></a>(num)</dt><dd><tt>Determine&nbsp;the&nbsp;default&nbsp;scannable</tt></dd></dl>
 <dl><dt><a name="-bindata"><strong>bindata</strong></a>(X, Y, binsep<font color="#909090">=0.01</font>, bin_cen<font color="#909090">=None</font>, bin_func<font color="#909090">=&lt;function nanmean&gt;</font>)</dt><dd><tt>Bins&nbsp;the&nbsp;data&nbsp;into&nbsp;bins&nbsp;separated&nbsp;by&nbsp;binsep.&nbsp;Values&nbsp;within&nbsp;the&nbsp;bin&nbsp;are&nbsp;averaged&nbsp;<br>
&nbsp;&nbsp;CEN,INT&nbsp;=&nbsp;<a href="#-bindata">bindata</a>(X,Y,binsep=0.01)<br>
or:<br>
&nbsp;&nbsp;CEN,INT&nbsp;=&nbsp;<a href="#-bindata">bindata</a>(X,Y,bin_cen=CEN)<br>
&nbsp;<br>
Note&nbsp;that&nbsp;np.nanmean&nbsp;is&nbsp;used&nbsp;to&nbsp;average&nbsp;values&nbsp;within&nbsp;each&nbsp;bin,&nbsp;which&nbsp;can&nbsp;be&nbsp;used<br>
to&nbsp;only&nbsp;average&nbsp;values&nbsp;with&nbsp;signal&nbsp;in.&nbsp;Other&nbsp;functions&nbsp;can&nbsp;be&nbsp;used&nbsp;by&nbsp;specifying&nbsp;bin_func:<br>
&nbsp;&nbsp;CEN,INT&nbsp;=&nbsp;<a href="#-bindata">bindata</a>(X,Y,0.01,bin_func=np.max)<br>
&nbsp;<br>
E.G.<br>
&nbsp;&nbsp;&nbsp;&nbsp;tth,ival&nbsp;=&nbsp;<a href="#-pixel2tth">pixel2tth</a>(num)<br>
&nbsp;&nbsp;&nbsp;&nbsp;ival[ival&lt;1]&nbsp;=&nbsp;np.nan<br>
&nbsp;&nbsp;&nbsp;&nbsp;CEN,INT&nbsp;=&nbsp;<a href="#-bindata">bindata</a>(tth,ival,0.01)</tt></dd></dl>
 <dl><dt><a name="-c2th"><strong>c2th</strong></a>(HKL<font color="#909090">=[0, 0, 1]</font>, scan<font color="#909090">=0</font>)</dt><dd><tt>Calculate&nbsp;the&nbsp;2-theta&nbsp;value&nbsp;of&nbsp;a&nbsp;reflection&nbsp;at&nbsp;the&nbsp;given&nbsp;scan's&nbsp;energy</tt></dd></dl>
 <dl><dt><a name="-checkexp"><strong>checkexp</strong></a>()</dt><dd><tt>Check&nbsp;experiment&nbsp;folder&nbsp;data</tt></dd></dl>
 <dl><dt><a name="-checklog"><strong>checklog</strong></a>(time<font color="#909090">=None</font>, mins<font color="#909090">=2</font>, cmd<font color="#909090">=False</font>, find<font color="#909090">=None</font>)</dt><dd><tt>Look&nbsp;at&nbsp;experiment&nbsp;log&nbsp;file&nbsp;<br>
<a href="#-checklog">checklog</a>(time,mins,commands,findstr)<br>
&nbsp;&nbsp;time&nbsp;=&nbsp;None&nbsp;-&nbsp;Uses&nbsp;current&nbsp;time&nbsp;(default)<br>
&nbsp;&nbsp;time&nbsp;=&nbsp;scan&nbsp;number&nbsp;(uses&nbsp;start&nbsp;time&nbsp;of&nbsp;this&nbsp;scan),&nbsp;0&nbsp;gives&nbsp;latest&nbsp;scan<br>
&nbsp;&nbsp;time&nbsp;=&nbsp;[hour,(min),(day),(month),(year)],&nbsp;()&nbsp;values&nbsp;set&nbsp;to&nbsp;default,&nbsp;defaults&nbsp;are&nbsp;time&nbsp;of&nbsp;last&nbsp;scan<br>
&nbsp;&nbsp;time&nbsp;=&nbsp;'2015-07-07&nbsp;13:50:08,000'&nbsp;<br>
&nbsp;&nbsp;mins&nbsp;=&nbsp;log&nbsp;file&nbsp;will&nbsp;display&nbsp;from&nbsp;time-mins&nbsp;to&nbsp;time<br>
&nbsp;&nbsp;mins&nbsp;=&nbsp;'all'&nbsp;-&nbsp;display&nbsp;whole&nbsp;log&nbsp;from&nbsp;first&nbsp;scan&nbsp;time<br>
&nbsp;&nbsp;commands&nbsp;=&nbsp;True/False&nbsp;-&nbsp;only&nbsp;display&nbsp;command&nbsp;strings<br>
&nbsp;&nbsp;find&nbsp;=&nbsp;only&nbsp;display&nbsp;lines&nbsp;that&nbsp;include&nbsp;findstr</tt></dd></dl>
 <dl><dt><a name="-checkpeaks"><strong>checkpeaks</strong></a>(num, test<font color="#909090">=1</font>, vary<font color="#909090">=''</font>)</dt><dd><tt>Check&nbsp;multiple&nbsp;scans&nbsp;for&nbsp;peaks</tt></dd></dl>
 <dl><dt><a name="-checkscan"><strong>checkscan</strong></a>(num1<font color="#909090">=None</font>, num2<font color="#909090">=None</font>, showval<font color="#909090">=None</font>)</dt><dd><tt>Get&nbsp;run&nbsp;number&nbsp;information,&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;checknum(#)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Display&nbsp;lots&nbsp;of&nbsp;information&nbsp;about&nbsp;a&nbsp;single&nbsp;scan<br>
&nbsp;&nbsp;&nbsp;&nbsp;checknum(first,last)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&nbsp;all&nbsp;the&nbsp;scans&nbsp;from&nbsp;first&nbsp;to&nbsp;last&nbsp;with&nbsp;brief&nbsp;info<br>
&nbsp;&nbsp;&nbsp;&nbsp;checknum([run1,run2,...])&nbsp;List&nbsp;all&nbsp;the&nbsp;scans&nbsp;in&nbsp;the&nbsp;list&nbsp;or&nbsp;array<br>
&nbsp;<br>
if&nbsp;#&nbsp;&lt;=&nbsp;0,&nbsp;#&nbsp;will&nbsp;be&nbsp;given&nbsp;as&nbsp;<a href="#-latest">latest</a>()-#<br>
&nbsp;<br>
checknum(...,showval='phi'):&nbsp;also&nbsp;display&nbsp;infomation&nbsp;from&nbsp;a&nbsp;variable,&nbsp;such&nbsp;as&nbsp;'phi'</tt></dd></dl>
 <dl><dt><a name="-checkscans"><strong>checkscans</strong></a>(num1<font color="#909090">=None</font>, num2<font color="#909090">=None</font>, showval<font color="#909090">=None</font>, find_scans<font color="#909090">=None</font>)</dt><dd><tt>Get&nbsp;brief&nbsp;info&nbsp;about&nbsp;each&nbsp;scan&nbsp;in&nbsp;a&nbsp;list<br>
&nbsp;<br>
<a href="#-checkscans">checkscans</a>([587892,587893,587894])<br>
&nbsp;<br>
<a href="#-checkscans">checkscans</a>(...,showval='phi')&nbsp;&gt;&gt;&nbsp;also&nbsp;display&nbsp;infomation&nbsp;from&nbsp;a&nbsp;variable,&nbsp;such&nbsp;as&nbsp;'phi'<br>
&nbsp;<br>
<a href="#-checkscans">checkscans</a>(...,find_scans='eta')&nbsp;&gt;&gt;&nbsp;only&nbsp;display&nbsp;'eta'&nbsp;scans</tt></dd></dl>
 <dl><dt><a name="-clear_prev_exp"><strong>clear_prev_exp</strong></a>()</dt><dd><tt>Clear&nbsp;the&nbsp;previous&nbsp;experiment&nbsp;+&nbsp;analysis&nbsp;directories&nbsp;files</tt></dd></dl>
 <dl><dt><a name="-conv_gauss"><strong>conv_gauss</strong></a>(y, window_size<font color="#909090">=31</font>, widval<font color="#909090">=0.2</font>)</dt><dd><tt>smooth&nbsp;data&nbsp;using&nbsp;covolution&nbsp;with&nbsp;gaussian</tt></dd></dl>
 <dl><dt><a name="-create_analysis_file"><strong>create_analysis_file</strong></a>(scans, depvar<font color="#909090">='Ta'</font>, vary<font color="#909090">=''</font>, varx<font color="#909090">=''</font>, fit_type<font color="#909090">='pVoight'</font>, bkg_type<font color="#909090">='flat'</font>, peaktest<font color="#909090">=1</font>, norm<font color="#909090">=True</font>, abscor<font color="#909090">=None</font>, plot<font color="#909090">='all'</font>, show_fits<font color="#909090">=True</font>, mask_cmd<font color="#909090">=None</font>, estvals<font color="#909090">=None</font>, xrange<font color="#909090">=None</font>, sortdep<font color="#909090">=True</font>, Nloop<font color="#909090">=10</font>, Binit<font color="#909090">=1e-05</font>, Tinc<font color="#909090">=2</font>, change_factor<font color="#909090">=0.5</font>, converge_max<font color="#909090">=100</font>, min_change<font color="#909090">=0.01</font>, savePLOT<font color="#909090">=False</font>, saveFIT<font color="#909090">=False</font>)</dt><dd><tt>Creates&nbsp;a&nbsp;new&nbsp;python&nbsp;analysis&nbsp;script&nbsp;in&nbsp;the&nbsp;anaysis&nbsp;folder<br>
The&nbsp;script&nbsp;will&nbsp;contain&nbsp;all&nbsp;the&nbsp;python&nbsp;code&nbsp;to&nbsp;call&nbsp;the&nbsp;Py16progs&nbsp;module,&nbsp;load&nbsp;the&nbsp;scan&nbsp;data&nbsp;and<br>
run&nbsp;an&nbsp;automated&nbsp;fit&nbsp;routine.<br>
Inputs:&nbsp;-&nbsp;See&nbsp;fit_scans&nbsp;for&nbsp;a&nbsp;description&nbsp;of&nbsp;the&nbsp;inputs</tt></dd></dl>
 <dl><dt><a name="-d2tth"><strong>d2tth</strong></a>(dspace, energy_kev)</dt><dd><tt>Converts&nbsp;array&nbsp;of&nbsp;d-spacings&nbsp;in&nbsp;A&nbsp;to&nbsp;two-theta&nbsp;in&nbsp;degrees</tt></dd></dl>
 <dl><dt><strong>error_func</strong> <em>lambda</em> x</dt></dl>
 <dl><dt><a name="-exp_list_add"><strong>exp_list_add</strong></a>()</dt><dd><tt>Creates/appends&nbsp;files&nbsp;in&nbsp;the&nbsp;system&nbsp;Temp&nbsp;directory&nbsp;to&nbsp;store&nbsp;previously&nbsp;used&nbsp;experiment&nbsp;folders</tt></dd></dl>
 <dl><dt><a name="-exp_list_get"><strong>exp_list_get</strong></a>()</dt><dd><tt>Loads&nbsp;a&nbsp;list&nbsp;of&nbsp;directories&nbsp;of&nbsp;previous&nbsp;experiments</tt></dd></dl>
 <dl><dt><a name="-findfile"><strong>findfile</strong></a>(num, topdir<font color="#909090">=None</font>)</dt><dd><tt>Find&nbsp;the&nbsp;experiment&nbsp;directory&nbsp;of&nbsp;a&nbsp;scan&nbsp;number</tt></dd></dl>
 <dl><dt><a name="-findranges"><strong>findranges</strong></a>(scannos, sep<font color="#909090">=':'</font>)</dt><dd><tt>Convert&nbsp;a&nbsp;list&nbsp;of&nbsp;numbers&nbsp;to&nbsp;a&nbsp;simple&nbsp;string</tt></dd></dl>
 <dl><dt><a name="-fit_scans"><strong>fit_scans</strong></a>(scans, depvar<font color="#909090">='Ta'</font>, vary<font color="#909090">=''</font>, varx<font color="#909090">=''</font>, fit_type<font color="#909090">='pVoight'</font>, bkg_type<font color="#909090">='flat'</font>, peaktest<font color="#909090">=1</font>, norm<font color="#909090">=True</font>, abscor<font color="#909090">=None</font>, plot<font color="#909090">='all'</font>, show_fits<font color="#909090">=True</font>, mask_cmd<font color="#909090">=None</font>, estvals<font color="#909090">=None</font>, xrange<font color="#909090">=None</font>, sortdep<font color="#909090">=True</font>, Nloop<font color="#909090">=10</font>, Binit<font color="#909090">=1e-05</font>, Tinc<font color="#909090">=2</font>, change_factor<font color="#909090">=0.5</font>, converge_max<font color="#909090">=100</font>, min_change<font color="#909090">=0.01</font>, savePLOT<font color="#909090">=False</font>, saveFIT<font color="#909090">=False</font>)</dt><dd><tt>&nbsp;Automated&nbsp;routine&nbsp;to&nbsp;fit&nbsp;peaks&nbsp;and&nbsp;plot&nbsp;results&nbsp;within&nbsp;runs&nbsp;of&nbsp;multiple&nbsp;scans&nbsp;dependent&nbsp;&nbsp;<br>
&nbsp;on&nbsp;another&nbsp;variable,&nbsp;such&nbsp;as&nbsp;temperature,&nbsp;energy&nbsp;or&nbsp;azimuthal&nbsp;depdences.<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#-fit_scans">fit_scans</a>(scans,depvar='Ta',vary='',fit_type&nbsp;=&nbsp;'pVoight',plot='all')<br>
&nbsp;OR<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val,err&nbsp;=&nbsp;<a href="#-fit_scans">fit_scans</a>(scans,depvar='Ta',vary='',fit_type&nbsp;=&nbsp;'pVoight',plot=None)<br>
&nbsp;<br>
&nbsp;INPUTS:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scans&nbsp;:&nbsp;list/array&nbsp;of&nbsp;scan&nbsp;numbers&nbsp;to&nbsp;use<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;depvar&nbsp;:&nbsp;('Ta')&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Independent&nbsp;variable,&nbsp;e.g.&nbsp;'Ta','Energy','psi'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vary&nbsp;:&nbsp;('')&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Dependent&nbsp;variable&nbsp;e.g.&nbsp;'APD',&nbsp;'roi1_sum',&nbsp;'peakroi'&nbsp;or&nbsp;''&nbsp;for&nbsp;automatic<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;varx&nbsp;:&nbsp;('')&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Independent&nbsp;axis&nbsp;variable&nbsp;e.g.&nbsp;'eta','chi','delta',&nbsp;or&nbsp;''&nbsp;for&nbsp;automatic<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fit_type&nbsp;:&nbsp;('pVoight):&nbsp;Type&nbsp;of&nbsp;fit&nbsp;to&nbsp;perform&nbsp;e.g.&nbsp;'Simple','pVoight','Lorentz','Gauss'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bkg_type&nbsp;:&nbsp;('flat')&nbsp;&nbsp;:&nbsp;Type&nbsp;of&nbsp;background&nbsp;to&nbsp;use&nbsp;e.g.&nbsp;'flat','slope','step'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;peaktest&nbsp;:&nbsp;(10)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Parameter&nbsp;to&nbsp;determine&nbsp;whether&nbsp;a&nbsp;peak&nbsp;exists,&nbsp;see&nbsp;help(ispeak)&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;norm&nbsp;:&nbsp;(True)&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Data&nbsp;normalised&nbsp;by&nbsp;time,&nbsp;transmission&nbsp;+&nbsp;ring&nbsp;current<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;abscor&nbsp;:&nbsp;(None)&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Absorption&nbsp;coefficient&nbsp;for&nbsp;material,&nbsp;None&nbsp;switches&nbsp;off&nbsp;correction<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plot&nbsp;:&nbsp;('all')&nbsp;&nbsp;&nbsp;:&nbsp;Create&nbsp;plot&nbsp;of&nbsp;fits&nbsp;at&nbsp;end.&nbsp;'all'&nbsp;plots&nbsp;all&nbsp;paramters,&nbsp;'int'&nbsp;plot&nbsp;integrated&nbsp;area,&nbsp;None&nbsp;doesn't&nbsp;plot<br>
&nbsp;&nbsp;&nbsp;&nbsp;show_fits&nbsp;:&nbsp;(False)&nbsp;&nbsp;&nbsp;:&nbsp;Generate&nbsp;plots&nbsp;for&nbsp;all&nbsp;scans&nbsp;and&nbsp;show&nbsp;fits&nbsp;(True/False)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mask_cmd&nbsp;:&nbsp;(None)&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Define&nbsp;regions&nbsp;to&nbsp;remove,&nbsp;e.g.&nbsp;[&nbsp;['x&lt;-1','x&gt;1','np.abs(x-34)&gt;0.1'],&nbsp;[x&lt;-1.2','x&gt;1.2']&nbsp;]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;estvals&nbsp;:&nbsp;(None)&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Define&nbsp;initial&nbsp;estimates&nbsp;of&nbsp;peak&nbsp;parameters,&nbsp;e.g.&nbsp;[height,cen,wid,bkg,slope]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xrange&nbsp;:&nbsp;(None)&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Give&nbsp;the&nbsp;plots&nbsp;a&nbsp;specific&nbsp;xrange&nbsp;e.g.&nbsp;[0,300]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sortdep&nbsp;:&nbsp;(True)&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Sort&nbsp;the&nbsp;final&nbsp;result&nbsp;by&nbsp;the&nbsp;depdent&nbsp;variable&nbsp;to&nbsp;give&nbsp;better&nbsp;plots&nbsp;(True/False)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Nloop&nbsp;:&nbsp;(100)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Number&nbsp;of&nbsp;RMC&nbsp;iterations&nbsp;of&nbsp;fit&nbsp;to&nbsp;perform,&nbsp;0&nbsp;to&nbsp;turn&nbsp;off&nbsp;RMC&nbsp;fitting<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Binit&nbsp;:&nbsp;(1e-5)&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Initial&nbsp;inverse-temperature&nbsp;for&nbsp;RMC<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tinc&nbsp;:&nbsp;(2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;RMC&nbsp;temperature&nbsp;increase&nbsp;factor<br>
change_factor&nbsp;:&nbsp;(0.5)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;RMC&nbsp;-&nbsp;width&nbsp;of&nbsp;normal&nbsp;distribution&nbsp;about&nbsp;which&nbsp;the&nbsp;estimate&nbsp;parameters&nbsp;are&nbsp;randomly&nbsp;varied<br>
&nbsp;converge_max&nbsp;:&nbsp;(100)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;RMC&nbsp;is&nbsp;converged&nbsp;when&nbsp;converge_max&nbsp;is&nbsp;reached<br>
&nbsp;&nbsp;&nbsp;min_change&nbsp;:&nbsp;(0.01)&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;RMC&nbsp;-&nbsp;converge&nbsp;value&nbsp;in&nbsp;increased&nbsp;by&nbsp;one&nbsp;when&nbsp;the&nbsp;relative&nbsp;change&nbsp;is&nbsp;less&nbsp;than&nbsp;this<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;savePLOT&nbsp;:&nbsp;(None)&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Save&nbsp;a&nbsp;jpg&nbsp;of&nbsp;the&nbsp;plot&nbsp;in&nbsp;the&nbsp;default&nbsp;directory&nbsp;(True/'Name.jpg'/None)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;saveFIT&nbsp;:&nbsp;(None)&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Save&nbsp;a&nbsp;text&nbsp;file&nbsp;of&nbsp;the&nbsp;fits&nbsp;in&nbsp;the&nbsp;default&nbsp;directory&nbsp;(True/'Name.txt'/None)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;OUTPUTS:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val&nbsp;:&nbsp;Fitted&nbsp;values:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val['Scan&nbsp;Number']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val[depvar]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val['Peak&nbsp;Height']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val['Peak&nbsp;Centre']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val['FWHM']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val['Lorz&nbsp;frac']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val['Background']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val['Area']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val['CHI2&nbsp;per&nbsp;dof']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err&nbsp;:&nbsp;Errors&nbsp;on&nbsp;fitted&nbsp;values<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err['Scan&nbsp;Number']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err['Peak&nbsp;Height']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err['Peak&nbsp;Centre']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err['FWHM']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err['Lorz&nbsp;frac']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err['Background']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err['Area']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out['CHI2&nbsp;per&nbsp;dof']<br>
&nbsp;<br>
NOTES:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;for&nbsp;psi&nbsp;scans,&nbsp;angles&nbsp;will&nbsp;automatically&nbsp;be&nbsp;placed&nbsp;between&nbsp;0&nbsp;and&nbsp;360&nbsp;degrees,&nbsp;unless&nbsp;xrange&nbsp;is&nbsp;set<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;if&nbsp;data&nbsp;has&nbsp;been&nbsp;saved&nbsp;with&nbsp;saveFIT=True,&nbsp;fitted&nbsp;values&nbsp;can&nbsp;be&nbsp;regained&nbsp;using:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val,err&nbsp;=&nbsp;<a href="#-load_fits">load_fits</a>(scans,depvar='Ta',fit_type='pVoight')<br>
&nbsp;<br>
PLOTS:<br>
&nbsp;&nbsp;&nbsp;&nbsp;"plot"&nbsp;keyword&nbsp;accepts&nbsp;the&nbsp;following&nbsp;as&nbsp;a&nbsp;single&nbsp;string&nbsp;or&nbsp;list&nbsp;of&nbsp;strings:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;'all'&nbsp;-&nbsp;a&nbsp;single&nbsp;figure&nbsp;with&nbsp;subplots&nbsp;of&nbsp;integrated&nbsp;intensity,&nbsp;width,&nbsp;centre,&nbsp;background&nbsp;etc.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;'int'&nbsp;-&nbsp;a&nbsp;figure&nbsp;with&nbsp;a&nbsp;single&nbsp;axis&nbsp;showing&nbsp;the&nbsp;integrated&nbsp;intensity<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;'wid'&nbsp;-&nbsp;a&nbsp;figure&nbsp;with&nbsp;a&nbsp;single&nbsp;axis&nbsp;showing&nbsp;the&nbsp;fitted&nbsp;FWHM<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;'cen'&nbsp;-&nbsp;a&nbsp;figure&nbsp;with&nbsp;a&nbsp;single&nbsp;axis&nbsp;showing&nbsp;the&nbsp;fitted&nbsp;centre<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;'surface'&nbsp;-&nbsp;*2D&nbsp;fits&nbsp;only!*&nbsp;plots&nbsp;integrated&nbsp;intensities&nbsp;vs&nbsp;x&nbsp;and&nbsp;y&nbsp;data<br>
&nbsp;<br>
MASKS:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;Masks&nbsp;define&nbsp;regions&nbsp;of&nbsp;each&nbsp;scan&nbsp;to&nbsp;remove<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;input&nbsp;"mask_cmd"&nbsp;takes&nbsp;string&nbsp;arguments&nbsp;that&nbsp;will&nbsp;be&nbsp;evaluated&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;These&nbsp;string&nbsp;arguments&nbsp;should&nbsp;be&nbsp;boolean&nbsp;statements&nbsp;about&nbsp;the&nbsp;variables&nbsp;x,&nbsp;y&nbsp;or&nbsp;dy<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;Any&nbsp;TRUE&nbsp;values&nbsp;will&nbsp;be&nbsp;removed<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;mask_cmd&nbsp;requires&nbsp;a&nbsp;list&nbsp;of&nbsp;lists&nbsp;as&nbsp;an&nbsp;input,&nbsp;where&nbsp;the&nbsp;each&nbsp;scan&nbsp;has&nbsp;its&nbsp;own&nbsp;list&nbsp;of&nbsp;string&nbsp;arguments<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;If&nbsp;only&nbsp;1&nbsp;item&nbsp;is&nbsp;given,&nbsp;it&nbsp;will&nbsp;be&nbsp;used&nbsp;in&nbsp;all&nbsp;scans<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;E.G.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;mask_cmd&nbsp;=&nbsp;[['x&gt;1']]&nbsp;#&nbsp;will&nbsp;remove&nbsp;values&nbsp;in&nbsp;all&nbsp;scans&nbsp;where&nbsp;x&gt;1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;mask_cmd&nbsp;=&nbsp;[[np.abs(x-1.4)&lt;0.1]]&nbsp;#&nbsp;will&nbsp;remove&nbsp;values&nbsp;in&nbsp;all&nbsp;scans&nbsp;within&nbsp;0.1&nbsp;of&nbsp;1.4<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;mask_cmd&nbsp;=&nbsp;[['x&gt;1','x&lt;-1']]&nbsp;#&nbsp;will&nbsp;remove&nbsp;values&nbsp;in&nbsp;all&nbsp;scans&nbsp;where&nbsp;x&gt;1&nbsp;and&nbsp;where&nbsp;x&lt;-1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;mask_cmd&nbsp;=&nbsp;[['x&gt;1'],['x&gt;2'],['x&gt;1'],...]&nbsp;#&nbsp;Remove&nbsp;different&nbsp;regions&nbsp;in&nbsp;different&nbsp;scans,&nbsp;MUST&nbsp;be&nbsp;same&nbsp;length&nbsp;as&nbsp;scans<br>
&nbsp;<br>
ESTIMATES:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;Estimate&nbsp;the&nbsp;initial&nbsp;parameters&nbsp;of&nbsp;each&nbsp;peak<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;input&nbsp;"estvals"&nbsp;takes&nbsp;list&nbsp;of&nbsp;lists,&nbsp;where&nbsp;each&nbsp;list&nbsp;contains&nbsp;initial&nbsp;parameters&nbsp;for&nbsp;each&nbsp;scan<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;E.G.&nbsp;For&nbsp;gaussian&nbsp;+&nbsp;slope:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;estvals&nbsp;=&nbsp;[height,cen,wid,bkg,slope]&nbsp;#&nbsp;same&nbsp;for&nbsp;all&nbsp;scans<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;&nbsp;&nbsp;&nbsp;&nbsp;estvals&nbsp;=&nbsp;[[height1,cen1,wid1,bkg1,slope1],[height2,cen2,wid2,bkg2,slope2],...]&nbsp;#&nbsp;Different&nbsp;for&nbsp;each&nbsp;scan<br>
&nbsp;<br>
FITTING&nbsp;PROCEDURE:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&gt;</tt></dd></dl>
 <dl><dt><a name="-fittest"><strong>fittest</strong></a>(x, y, dy<font color="#909090">=None</font>, tryall<font color="#909090">=False</font>, disp<font color="#909090">=False</font>)</dt><dd><tt>Attempt&nbsp;multiple&nbsp;fit&nbsp;types&nbsp;and&nbsp;return&nbsp;the&nbsp;best</tt></dd></dl>
 <dl><dt><a name="-frange"><strong>frange</strong></a>(start, stop<font color="#909090">=None</font>, step<font color="#909090">=1</font>)</dt><dd><tt>Like&nbsp;np.arange&nbsp;but&nbsp;ends&nbsp;at&nbsp;stop,&nbsp;rather&nbsp;than&nbsp;stop-step</tt></dd></dl>
 <dl><dt><a name="-gauss"><strong>gauss</strong></a>(x, height<font color="#909090">=1</font>, cen<font color="#909090">=0</font>, FWHM<font color="#909090">=0.5</font>, bkg<font color="#909090">=0</font>)</dt><dd><tt>Define&nbsp;Gaussian</tt></dd></dl>
 <dl><dt><a name="-gauss2D"><strong>gauss2D</strong></a>((X, Y), height<font color="#909090">=1</font>, cen_x<font color="#909090">=0</font>, cen_y<font color="#909090">=0</font>, FWHM_x<font color="#909090">=0.5</font>, FWHM_y<font color="#909090">=0.5</font>, bkg<font color="#909090">=0</font>)</dt><dd><tt>Define&nbsp;2D&nbsp;Gaussian</tt></dd></dl>
 <dl><dt><a name="-gaussfit2D"><strong>gaussfit2D</strong></a>(cut)</dt><dd><tt>Fit&nbsp;a&nbsp;peak&nbsp;in&nbsp;a&nbsp;pilatus&nbsp;image&nbsp;***Unfinished***</tt></dd></dl>
 <dl><dt><a name="-get_all_scannos"><strong>get_all_scannos</strong></a>()</dt><dd><tt>Returns&nbsp;the&nbsp;scan&nbsp;numbers&nbsp;available&nbsp;in&nbsp;filedir</tt></dd></dl>
 <dl><dt><a name="-getdata"><strong>getdata</strong></a>(num<font color="#909090">=None</font>, varx<font color="#909090">=''</font>, vary<font color="#909090">=''</font>, norm<font color="#909090">=True</font>, abscor<font color="#909090">=None</font>)</dt><dd><tt>Get&nbsp;useful&nbsp;values&nbsp;from&nbsp;scans<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x,y,dy,varx,vary,ttl,d&nbsp;=&nbsp;<a href="#-getdata">getdata</a>(#/d,'varx','vary')<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;vary&nbsp;can&nbsp;also&nbsp;call&nbsp;re-intergrate&nbsp;pilatus&nbsp;regions&nbsp;of&nbsp;interest:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vary&nbsp;=&nbsp;'nroipeak'&nbsp;-&nbsp;search&nbsp;for&nbsp;peak&nbsp;and&nbsp;create&nbsp;roi&nbsp;around&nbsp;it<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vary&nbsp;=&nbsp;'nroipeakbkg'&nbsp;-&nbsp;subtract&nbsp;average&nbsp;background&nbsp;defined&nbsp;outside&nbsp;roi<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vary&nbsp;=&nbsp;'nroi[110,242,75,67]'&nbsp;-&nbsp;creates&nbsp;roi&nbsp;[ceni,cenj,widi,widj]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vary&nbsp;=&nbsp;'nroi[31,31]'&nbsp;-&nbsp;creates&nbsp;centred&nbsp;roi&nbsp;with&nbsp;size&nbsp;[widi,widj]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vary&nbsp;=&nbsp;'nroi'&nbsp;-&nbsp;creates&nbsp;roi2&nbsp;like&nbsp;roi<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vary&nbsp;=&nbsp;'nroibkg'&nbsp;-&nbsp;as&nbsp;above&nbsp;but&nbsp;with&nbsp;background&nbsp;subtraction</tt></dd></dl>
 <dl><dt><a name="-getmeta"><strong>getmeta</strong></a>(nums<font color="#909090">=None</font>, field<font color="#909090">='Energy'</font>)</dt><dd><tt>Get&nbsp;metadata&nbsp;from&nbsp;multiple&nbsp;scans&nbsp;and&nbsp;return&nbsp;array&nbsp;of&nbsp;values<br>
Usage:&nbsp;A&nbsp;=&nbsp;<a href="#-getmeta">getmeta</a>(&nbsp;[nums],&nbsp;'field')<br>
&nbsp;&nbsp;&nbsp;&nbsp;[nums]&nbsp;=&nbsp;list&nbsp;of&nbsp;scan&nbsp;numbers<br>
&nbsp;&nbsp;&nbsp;&nbsp;field&nbsp;=&nbsp;name&nbsp;of&nbsp;metadata&nbsp;field<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;=&nbsp;array&nbsp;of&nbsp;values&nbsp;from&nbsp;each&nbsp;scan&nbsp;with&nbsp;same&nbsp;length&nbsp;as&nbsp;nums<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Any&nbsp;scans&nbsp;that&nbsp;do&nbsp;not&nbsp;contain&nbsp;field&nbsp;are&nbsp;returned&nbsp;0</tt></dd></dl>
 <dl><dt><a name="-getmetas"><strong>getmetas</strong></a>(nums<font color="#909090">=[0]</font>, fields<font color="#909090">=['Energy']</font>)</dt><dd><tt>Get&nbsp;several&nbsp;metadata&nbsp;values&nbsp;from&nbsp;multiple&nbsp;scans&nbsp;and&nbsp;return&nbsp;list&nbsp;of&nbsp;values<br>
Usage:&nbsp;A&nbsp;=&nbsp;<a href="#-getmetas">getmetas</a>(&nbsp;[nums],&nbsp;'field')<br>
&nbsp;&nbsp;&nbsp;&nbsp;[nums]&nbsp;=&nbsp;list&nbsp;of&nbsp;scan&nbsp;numbers&nbsp;/&nbsp;or&nbsp;nums=12345<br>
&nbsp;&nbsp;&nbsp;&nbsp;fields&nbsp;=&nbsp;name&nbsp;or&nbsp;list&nbsp;of&nbsp;metadata&nbsp;field/&nbsp;fields<br>
&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;=&nbsp;list&nbsp;of&nbsp;values&nbsp;from&nbsp;each&nbsp;scan&nbsp;with&nbsp;same&nbsp;length&nbsp;as&nbsp;nums<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Any&nbsp;scans&nbsp;that&nbsp;do&nbsp;not&nbsp;contain&nbsp;field&nbsp;are&nbsp;returned&nbsp;NaN</tt></dd></dl>
 <dl><dt><a name="-getvol"><strong>getvol</strong></a>(num, ROIcen<font color="#909090">=None</font>, ROIsize<font color="#909090">=None</font>)</dt><dd><tt>Load&nbsp;Pilatus&nbsp;images&nbsp;into&nbsp;a&nbsp;single&nbsp;volume:&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;vol=<a href="#-getvol">getvol</a>(#/d)<br>
&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;is&nbsp;the&nbsp;scan&nbsp;number&nbsp;or&nbsp;dataloader&nbsp;from&nbsp;readscan<br>
&nbsp;&nbsp;&nbsp;&nbsp;vol&nbsp;is&nbsp;a&nbsp;[n&nbsp;x&nbsp;m&nbsp;x&nbsp;o]&nbsp;sized&nbsp;numpy&nbsp;array,&nbsp;where&nbsp;n&nbsp;and&nbsp;m&nbsp;are&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;pilatus&nbsp;detector&nbsp;(195&nbsp;x&nbsp;487)&nbsp;and&nbsp;o&nbsp;is&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;scan.<br>
&nbsp;<br>
The&nbsp;volume&nbsp;from&nbsp;a&nbsp;region&nbsp;of&nbsp;interest&nbsp;can&nbsp;be&nbsp;obtained&nbsp;using:<br>
&nbsp;&nbsp;&nbsp;&nbsp;vol=<a href="#-getvol">getvol</a>(#/d,ROIcen=[110,242],ROIsize=[31,31])</tt></dd></dl>
 <dl><dt><a name="-ispeak"><strong>ispeak</strong></a>(Y, dY<font color="#909090">=None</font>, test<font color="#909090">=1</font>, disp<font color="#909090">=False</font>, return_rat<font color="#909090">=False</font>)</dt><dd><tt>Determines&nbsp;whether&nbsp;a&nbsp;peak&nbsp;exists&nbsp;in&nbsp;the&nbsp;given&nbsp;dataset</tt></dd></dl>
 <dl><dt><a name="-joindata"><strong>joindata</strong></a>(nums<font color="#909090">=None</font>, varx<font color="#909090">=''</font>, vary<font color="#909090">='Energy'</font>, varz<font color="#909090">=''</font>, norm<font color="#909090">=True</font>, abscor<font color="#909090">=None</font>, save<font color="#909090">=False</font>)</dt><dd><tt>Get&nbsp;useful&nbsp;values&nbsp;from&nbsp;scans,&nbsp;join&nbsp;multiple&nbsp;scans&nbsp;together,&nbsp;output&nbsp;joined&nbsp;arrays<br>
&nbsp;x,y,z,varx,vary,varz,ttl&nbsp;=&nbsp;<a href="#-joindata">joindata</a>([nums],'varx','vary','varz')<br>
&nbsp;<br>
&nbsp;&nbsp;x&nbsp;=&nbsp;nxm&nbsp;array&nbsp;of&nbsp;scanned&nbsp;values,&nbsp;where&nbsp;n&nbsp;is&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;scan&nbsp;and&nbsp;m&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;scans<br>
&nbsp;&nbsp;y&nbsp;=&nbsp;nxm&nbsp;array&nbsp;of&nbsp;values&nbsp;that&nbsp;change&nbsp;with&nbsp;each&nbsp;scan<br>
&nbsp;&nbsp;z&nbsp;=&nbsp;nxm&nbsp;array&nbsp;of&nbsp;measured&nbsp;values<br>
&nbsp;&nbsp;varx,vary,varz&nbsp;=&nbsp;names&nbsp;of&nbsp;scan&nbsp;values<br>
&nbsp;&nbsp;ttl&nbsp;=&nbsp;title&nbsp;generated&nbsp;for&nbsp;these&nbsp;scans</tt></dd></dl>
 <dl><dt><a name="-labels"><strong>labels</strong></a>(ttl<font color="#909090">=None</font>, xvar<font color="#909090">=None</font>, yvar<font color="#909090">=None</font>, zvar<font color="#909090">=None</font>, size<font color="#909090">='Normal'</font>)</dt><dd><tt>Add&nbsp;good&nbsp;labels&nbsp;to&nbsp;current&nbsp;plot</tt></dd></dl>
 <dl><dt><a name="-latest"><strong>latest</strong></a>()</dt><dd><tt>Get&nbsp;the&nbsp;latest&nbsp;run&nbsp;during&nbsp;and&nbsp;experiment</tt></dd></dl>
 <dl><dt><a name="-linefit"><strong>linefit</strong></a>(x, y, dy<font color="#909090">=None</font>, disp<font color="#909090">=False</font>)</dt><dd><tt>Fit&nbsp;a&nbsp;line&nbsp;to&nbsp;data,&nbsp;y&nbsp;=&nbsp;mx&nbsp;+&nbsp;c<br>
&nbsp;<br>
fit,err&nbsp;=&nbsp;<a href="#-linefit">linefit</a>(x,y,dy,disp=False)<br>
x,y&nbsp;=&nbsp;arrays&nbsp;of&nbsp;data&nbsp;to&nbsp;fit<br>
dy&nbsp;=&nbsp;error&nbsp;bars&nbsp;on&nbsp;each&nbsp;y&nbsp;value&nbsp;(or&nbsp;leave&nbsp;as&nbsp;None)<br>
disp&nbsp;=&nbsp;True/False&nbsp;display&nbsp;results<br>
&nbsp;<br>
fit/err&nbsp;=&nbsp;dicts&nbsp;of&nbsp;results&nbsp;with&nbsp;entries:<br>
&nbsp;&nbsp;&nbsp;&nbsp;'Gradient'&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;gradient&nbsp;of&nbsp;the&nbsp;line&nbsp;(m)<br>
&nbsp;&nbsp;&nbsp;&nbsp;'Intercept'&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;intercept&nbsp;(c)<br>
&nbsp;&nbsp;&nbsp;&nbsp;'x'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;x&nbsp;values,&nbsp;same&nbsp;as&nbsp;x<br>
&nbsp;&nbsp;&nbsp;&nbsp;'y'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;the&nbsp;fitted&nbsp;y&nbsp;values&nbsp;for&nbsp;each&nbsp;x<br>
&nbsp;<br>
Note:&nbsp;a&nbsp;matching&nbsp;line&nbsp;can&nbsp;be&nbsp;generated&nbsp;with:<br>
&nbsp;&nbsp;&nbsp;&nbsp;y&nbsp;=&nbsp;<a href="#-straightline">straightline</a>(x,grad=fit['Gradient'],inter=fit['Intercept'])</tt></dd></dl>
 <dl><dt><a name="-load_fits"><strong>load_fits</strong></a>(scans<font color="#909090">=[0]</font>, depvar<font color="#909090">='Ta'</font>, plot<font color="#909090">=None</font>, fit_type<font color="#909090">='pVoight'</font>, file<font color="#909090">=None</font>, disp<font color="#909090">=False</font>, save<font color="#909090">=False</font>, **fitopt)</dt><dd><tt>&nbsp;Load&nbsp;previously&nbsp;fitted&nbsp;data&nbsp;from&nbsp;<a href="#-fit_scans">fit_scans</a>(),&nbsp;assuming&nbsp;it&nbsp;completed&nbsp;succesfully&nbsp;and&nbsp;was&nbsp;saved.<br>
&nbsp;&nbsp;&gt;&nbsp;The&nbsp;inputs&nbsp;are&nbsp;used&nbsp;to&nbsp;determine&nbsp;the&nbsp;automatic&nbsp;filename<br>
&nbsp;&nbsp;&gt;&nbsp;Both&nbsp;the&nbsp;values&nbsp;and&nbsp;error&nbsp;files&nbsp;are&nbsp;read<br>
&nbsp;&nbsp;&gt;&nbsp;Plots&nbsp;can&nbsp;be&nbsp;re-generated<br>
&nbsp;&nbsp;&gt;&nbsp;A&nbsp;typical&nbsp;filename&nbsp;is:&nbsp;'Ta&nbsp;ScansFIT&nbsp;00001-00010&nbsp;pVoight.dat'<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val,err&nbsp;=&nbsp;<a href="#-load_fits">load_fits</a>(scans,depvar='Ta',fit_type&nbsp;=&nbsp;'pVoight',plot=None)<br>
&nbsp;<br>
&nbsp;INPUTS:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scans&nbsp;:&nbsp;[N,M]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;list&nbsp;of&nbsp;scan&nbsp;numbers&nbsp;used&nbsp;in&nbsp;<a href="#-fit_scans">fit_scans</a>(),&nbsp;only&nbsp;the&nbsp;first&nbsp;and&nbsp;final&nbsp;values&nbsp;are&nbsp;required<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;depvar&nbsp;:&nbsp;'Ta'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Independent&nbsp;variable,&nbsp;e.g.&nbsp;'Ta','Energy','psi'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fit_type&nbsp;:&nbsp;'pVoight&nbsp;&nbsp;:&nbsp;Type&nbsp;of&nbsp;fit&nbsp;to&nbsp;perform&nbsp;e.g.&nbsp;'Simple','pVoight','Lorentz','Gauss'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plot&nbsp;:&nbsp;None&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Plot&nbsp;the&nbsp;loaded&nbsp;fit&nbsp;data,&nbsp;available:&nbsp;[None,'all','int','cen','wid']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file&nbsp;:&nbsp;None&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;If&nbsp;given,&nbsp;this&nbsp;filename&nbsp;will&nbsp;be&nbsp;used&nbsp;to&nbsp;open&nbsp;the&nbsp;data&nbsp;files<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;disp&nbsp;:&nbsp;False&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;If&nbsp;True,&nbsp;prints&nbsp;the&nbsp;data&nbsp;on&nbsp;the&nbsp;console<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;save&nbsp;:&nbsp;False&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;If&nbsp;true,&nbsp;saves&nbsp;images&nbsp;of&nbsp;the&nbsp;plots<br>
&nbsp;&nbsp;&nbsp;ALTERNATIVE:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scans&nbsp;:&nbsp;'filename':&nbsp;Name&nbsp;of&nbsp;.dat&nbsp;file&nbsp;where&nbsp;fit&nbsp;data&nbsp;is&nbsp;stored&nbsp;(no&nbsp;other&nbsp;parameters&nbsp;are&nbsp;required)&nbsp;<br>
&nbsp;OUTPUTS:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val&nbsp;:&nbsp;Fitted&nbsp;values<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val['Scan&nbsp;Number']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val[depvar]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val['Peak&nbsp;Height']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val['Peak&nbsp;Centre']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val['FWHM']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val['Lorz&nbsp;frac']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val['Background']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val['Area']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val['CHI2&nbsp;per&nbsp;dof']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err&nbsp;:&nbsp;Errors&nbsp;on&nbsp;fitted&nbsp;values<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err['Scan&nbsp;Number']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err['Peak&nbsp;Height']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err['Peak&nbsp;Centre']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err['FWHM']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err['Lorz&nbsp;frac']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err['Background']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err['Area']<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err['CHI2&nbsp;per&nbsp;dof']<br>
&nbsp;<br>
E.G.&nbsp;val,err&nbsp;=&nbsp;<a href="#-load_fits">load_fits</a>([572138,572368],depvar=['sx',&nbsp;'sy'],fit_type='Gauss')<br>
E.G.&nbsp;val,err&nbsp;=&nbsp;<a href="#-load_fits">load_fits</a>('sx&nbsp;sy&nbsp;ScansFIT&nbsp;572138-572368&nbsp;Gauss')</tt></dd></dl>
 <dl><dt><a name="-loaddata"><strong>loaddata</strong></a>(name)</dt><dd><tt>Load&nbsp;data&nbsp;saved&nbsp;using&nbsp;savedata<br>
&nbsp;&nbsp;x,y,dy&nbsp;=&nbsp;<a href="#-loaddata">loaddata</a>(name)<br>
&nbsp;<br>
name&nbsp;=&nbsp;str&nbsp;as&nbsp;given&nbsp;to&nbsp;savedata,&nbsp;no&nbsp;extention<br>
x,y,dy&nbsp;=&nbsp;arrays&nbsp;of&nbsp;data&nbsp;as&nbsp;saved<br>
&nbsp;<br>
E.G.<br>
&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;=&nbsp;[1,2,3,4]<br>
&nbsp;&nbsp;&nbsp;&nbsp;y&nbsp;=&nbsp;[2.4,56,43,1e6]<br>
&nbsp;&nbsp;&nbsp;&nbsp;dy&nbsp;=&nbsp;np.sqrt(y)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#-savedata">savedata</a>('test',x,y,dy,header='lovely&nbsp;data')<br>
&nbsp;&nbsp;&nbsp;&nbsp;x,y,dy&nbsp;=&nbsp;<a href="#-loaddata">loaddata</a>('test')</tt></dd></dl>
 <dl><dt><a name="-loadscan"><strong>loadscan</strong></a>(num, vary<font color="#909090">=None</font>)</dt><dd><tt>Load&nbsp;a&nbsp;scan.dat&nbsp;file&nbsp;saved&nbsp;with&nbsp;savescan&nbsp;from&nbsp;the&nbsp;analysis&nbsp;folder</tt></dd></dl>
 <dl><dt><a name="-lorentz"><strong>lorentz</strong></a>(x, height<font color="#909090">=1</font>, cen<font color="#909090">=0</font>, FWHM<font color="#909090">=0.5</font>, bkg<font color="#909090">=0</font>)</dt><dd><tt>Define&nbsp;Lorentzian</tt></dd></dl>
 <dl><dt><a name="-maskvals"><strong>maskvals</strong></a>(x, y, dy, mask_cmd)</dt><dd><tt>Returns&nbsp;arrays&nbsp;masked&nbsp;by&nbsp;requested&nbsp;rules<br>
Allows&nbsp;you&nbsp;to&nbsp;remove&nbsp;regions&nbsp;of&nbsp;a&nbsp;scan&nbsp;easily.<br>
e.g.&nbsp;x,y,dy&nbsp;=&nbsp;<a href="#-maskvals">maskvals</a>(x,y,dy,['x&lt;0'])<br>
&nbsp;<br>
Masks&nbsp;should&nbsp;be&nbsp;a&nbsp;list&nbsp;of&nbsp;strings<br>
Each&nbsp;string&nbsp;should&nbsp;define&nbsp;an&nbsp;evaluatable&nbsp;statement&nbsp;that&nbsp;defines&nbsp;a&nbsp;region&nbsp;of&nbsp;x&nbsp;or&nbsp;y<br>
Each&nbsp;defined&nbsp;region&nbsp;will&nbsp;be&nbsp;REMOVED<br>
examples:&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;'x&lt;-1'<br>
&nbsp;&nbsp;&nbsp;&nbsp;'x&gt;1'<br>
&nbsp;&nbsp;&nbsp;&nbsp;'np.abs(x-34)&gt;0.1']<br>
&nbsp;&nbsp;&nbsp;&nbsp;[x&lt;-1.2','x&gt;1.2']</tt></dd></dl>
 <dl><dt><a name="-metaprint"><strong>metaprint</strong></a>(d1, d2<font color="#909090">=None</font>)</dt><dd><tt>Print&nbsp;metadata&nbsp;of&nbsp;a&nbsp;scan:<br>
&nbsp;&nbsp;&nbsp;&nbsp;metadata(d)<br>
OR&nbsp;compare&nbsp;metadata&nbsp;of&nbsp;two&nbsp;scans:<br>
&nbsp;&nbsp;&nbsp;&nbsp;metadata(d1,d2)</tt></dd></dl>
 <dl><dt><a name="-mini_string_range"><strong>mini_string_range</strong></a>(scannos, sep<font color="#909090">=':'</font>)</dt><dd><tt>Convert&nbsp;a&nbsp;list&nbsp;of&nbsp;numbers&nbsp;to&nbsp;a&nbsp;simple&nbsp;string</tt></dd></dl>
 <dl><dt><a name="-numbers2string"><strong>numbers2string</strong></a>(scannos, sep<font color="#909090">=':'</font>)</dt><dd><tt>Convert&nbsp;a&nbsp;list&nbsp;of&nbsp;numbers&nbsp;to&nbsp;a&nbsp;simple&nbsp;string</tt></dd></dl>
 <dl><dt><a name="-orderpar"><strong>orderpar</strong></a>(x, Tc<font color="#909090">=100</font>, beta<font color="#909090">=0.5</font>, amp<font color="#909090">=1</font>)</dt><dd><tt>Generate&nbsp;an&nbsp;order&nbsp;paramter</tt></dd></dl>
 <dl><dt><a name="-orderparfit"><strong>orderparfit</strong></a>(x, y, dy<font color="#909090">=None</font>, Tc<font color="#909090">=None</font>, disp<font color="#909090">=None</font>)</dt><dd><tt>Fit&nbsp;an&nbsp;order&nbsp;parameter&nbsp;to&nbsp;a&nbsp;temperature&nbsp;dependence&nbsp;y&nbsp;=&nbsp;f(T)</tt></dd></dl>
 <dl><dt><a name="-peakfind"><strong>peakfind</strong></a>(Y, cutoff<font color="#909090">=0.01</font>)</dt><dd><tt>Finds&nbsp;peaks&nbsp;in&nbsp;the&nbsp;given&nbsp;1D&nbsp;spectrum</tt></dd></dl>
 <dl><dt><a name="-peakfit"><strong>peakfit</strong></a>(x, y, dy<font color="#909090">=None</font>, type<font color="#909090">='pVoight'</font>, bkg_type<font color="#909090">='flat'</font>, peaktest<font color="#909090">=1</font>, estvals<font color="#909090">=None</font>, Nloop<font color="#909090">=10</font>, Binit<font color="#909090">=1e-05</font>, Tinc<font color="#909090">=2</font>, change_factor<font color="#909090">=0.5</font>, converge_max<font color="#909090">=100</font>, min_change<font color="#909090">=0.01</font>, interpolate<font color="#909090">=False</font>, debug<font color="#909090">=False</font>, plot<font color="#909090">=False</font>, disp<font color="#909090">=False</font>)</dt><dd><tt>General&nbsp;Peak&nbsp;Fitting&nbsp;function&nbsp;to&nbsp;fit&nbsp;a&nbsp;profile&nbsp;to&nbsp;a&nbsp;peak&nbsp;in&nbsp;y&nbsp;=&nbsp;f(x)<br>
Allows&nbsp;several&nbsp;possible&nbsp;profiles&nbsp;to&nbsp;be&nbsp;used&nbsp;and&nbsp;can&nbsp;try&nbsp;to&nbsp;find&nbsp;the&nbsp;best&nbsp;estimates&nbsp;for&nbsp;<br>
fitting&nbsp;parameters&nbsp;using&nbsp;an&nbsp;RMC-based&nbsp;least-squares&nbsp;routine.<br>
&nbsp;<br>
out,err&nbsp;=&nbsp;<a href="#-peakfit">peakfit</a>(x,y)<br>
out,err&nbsp;=&nbsp;<a href="#-peakfit">peakfit</a>(x,y,dy=None,type='pVoight',**fitoptions)<br>
&nbsp;<br>
**fitoptions:<br>
Basic&nbsp;parameters:<br>
&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;=&nbsp;array&nbsp;of&nbsp;the&nbsp;dependent&nbsp;variable,&nbsp;e.g.&nbsp;eta,&nbsp;mu,&nbsp;phi<br>
&nbsp;&nbsp;&nbsp;&nbsp;y&nbsp;=&nbsp;array&nbsp;of&nbsp;the&nbsp;independent&nbsp;variable,&nbsp;e.g.&nbsp;maxval,roi1_sum,&nbsp;APD<br>
&nbsp;&nbsp;&nbsp;&nbsp;dy&nbsp;=&nbsp;errors&nbsp;on&nbsp;y&nbsp;(default&nbsp;=&nbsp;None)<br>
&nbsp;&nbsp;&nbsp;&nbsp;type&nbsp;=&nbsp;function&nbsp;type.&nbsp;Allowed:&nbsp;'pVoight'&nbsp;(default),&nbsp;'Gauss',&nbsp;'Lorentz',&nbsp;'Simple'*<br>
&nbsp;&nbsp;&nbsp;&nbsp;bkg_type&nbsp;=&nbsp;background&nbsp;type.&nbsp;Allowed:&nbsp;'flat'&nbsp;(default),&nbsp;'slope',&nbsp;'step'<br>
RMC&nbsp;options:<br>
&nbsp;&nbsp;&nbsp;&nbsp;Nloop&nbsp;=&nbsp;Number&nbsp;of&nbsp;iterations&nbsp;per&nbsp;temperature,&nbsp;default&nbsp;=&nbsp;0&nbsp;(RMC&nbsp;off)**<br>
&nbsp;&nbsp;&nbsp;&nbsp;Binit&nbsp;=&nbsp;Initial&nbsp;values&nbsp;of&nbsp;1/kbT&nbsp;used&nbsp;for&nbsp;RMC,&nbsp;default&nbsp;=&nbsp;1e-3&nbsp;(lower&nbsp;=&nbsp;Higher&nbsp;temp)<br>
&nbsp;&nbsp;&nbsp;&nbsp;Tinc&nbsp;=&nbsp;After&nbsp;Nloop&nbsp;steps,&nbsp;the&nbsp;temperature&nbsp;is&nbsp;increased&nbsp;by&nbsp;factor&nbsp;Tinc,&nbsp;default&nbsp;=&nbsp;2<br>
&nbsp;&nbsp;&nbsp;&nbsp;change_factor&nbsp;=&nbsp;Each&nbsp;parameter&nbsp;is&nbsp;multiplied&nbsp;by&nbsp;a&nbsp;normal&nbsp;distribution&nbsp;around&nbsp;1&nbsp;with&nbsp;width&nbsp;change_factor.&nbsp;(Default&nbsp;=&nbsp;0.5)<br>
&nbsp;&nbsp;&nbsp;&nbsp;converge_max&nbsp;=&nbsp;Iterations&nbsp;will&nbsp;end&nbsp;when&nbsp;convergece&nbsp;reaches&nbsp;converge_max.&nbsp;(Default&nbsp;=&nbsp;100)<br>
&nbsp;&nbsp;&nbsp;&nbsp;min_change&nbsp;=&nbsp;Relative&nbsp;variation&nbsp;of&nbsp;parameters&nbsp;must&nbsp;be&nbsp;below&nbsp;min_change&nbsp;to&nbsp;increase&nbsp;convergence&nbsp;value.&nbsp;(Default&nbsp;=&nbsp;0.01)<br>
Output&nbsp;options:<br>
&nbsp;&nbsp;&nbsp;&nbsp;interpolate&nbsp;=&nbsp;True:&nbsp;The&nbsp;output&nbsp;fit&nbsp;will&nbsp;have&nbsp;interpolated&nbsp;(much&nbsp;finer)&nbsp;values&nbsp;in&nbsp;x&nbsp;and&nbsp;y.&nbsp;(Default&nbsp;=&nbsp;False)<br>
&nbsp;&nbsp;&nbsp;&nbsp;debug&nbsp;=&nbsp;True:&nbsp;Output&nbsp;of&nbsp;each&nbsp;iteration&nbsp;is&nbsp;displayed.&nbsp;(Default&nbsp;=&nbsp;False)<br>
&nbsp;&nbsp;&nbsp;&nbsp;disp&nbsp;=&nbsp;True:&nbsp;The&nbsp;final&nbsp;fitted&nbsp;parameters&nbsp;will&nbsp;be&nbsp;displayed&nbsp;in&nbsp;the&nbsp;command&nbsp;line.&nbsp;(Dafault&nbsp;=&nbsp;False)<br>
&nbsp;<br>
Output:<br>
&nbsp;&nbsp;&nbsp;&nbsp;out&nbsp;=&nbsp;dict&nbsp;with&nbsp;fitted&nbsp;parameters<br>
&nbsp;&nbsp;&nbsp;&nbsp;err&nbsp;=&nbsp;dict&nbsp;with&nbsp;errors&nbsp;on&nbsp;fitted&nbsp;paramters<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;out.keys()&nbsp;=&nbsp;['Peak&nbsp;Height','Peak&nbsp;Centre','FWHM','Lorz&nbsp;frac','Background','Area','CHI**2','CHI2&nbsp;per&nbsp;dof','x','y']<br>
&nbsp;<br>
*&nbsp;selecting&nbsp;type='simple'&nbsp;will&nbsp;not&nbsp;fit&nbsp;the&nbsp;data,&nbsp;just&nbsp;provide&nbsp;a&nbsp;very&nbsp;simple&nbsp;estimation.<br>
**&nbsp;Nloop&nbsp;must&nbsp;be&nbsp;set&nbsp;&gt;&nbsp;0&nbsp;for&nbsp;the&nbsp;RMC&nbsp;routine&nbsp;to&nbsp;be&nbsp;used,&nbsp;for&nbsp;Nloop=0&nbsp;or&nbsp;converge_max=0,&nbsp;a&nbsp;simple&nbsp;gradient&nbsp;decend&nbsp;method&nbsp;from&nbsp;a&nbsp;simple&nbsp;estimation&nbsp;is&nbsp;used.<br>
&nbsp;<br>
Notes&nbsp;on&nbsp;the&nbsp;RMC&nbsp;routine:<br>
&nbsp;-&nbsp;see&nbsp;the&nbsp;code</tt></dd></dl>
 <dl><dt><a name="-pil_peaks"><strong>pil_peaks</strong></a>(scans, depvar<font color="#909090">='Ta'</font>, ROIsize<font color="#909090">=[31, 31]</font>, cax<font color="#909090">=None</font>, save<font color="#909090">=False</font>)</dt><dd><tt>Show&nbsp;pilatus&nbsp;peak&nbsp;search&nbsp;results</tt></dd></dl>
 <dl><dt><a name="-pilpeak"><strong>pilpeak</strong></a>(vol, disp<font color="#909090">=False</font>)</dt><dd><tt>Find&nbsp;peak&nbsp;in&nbsp;pilatus&nbsp;detector,&nbsp;within&nbsp;peakregion<br>
&nbsp;[pk_i,pk_j],frame&nbsp;=&nbsp;<a href="#-pilpeak">pilpeak</a>(vol)<br>
&nbsp;<br>
Currently&nbsp;uses&nbsp;a&nbsp;very&nbsp;basic&nbsp;search&nbsp;that&nbsp;rebins&nbsp;the&nbsp;volume&nbsp;into&nbsp;courser&nbsp;bins,<br>
averaging&nbsp;the&nbsp;intensities&nbsp;then&nbsp;finding&nbsp;the&nbsp;position&nbsp;of&nbsp;the&nbsp;max&nbsp;bin.</tt></dd></dl>
 <dl><dt><a name="-pilpeaks"><strong>pilpeaks</strong></a>(vol, rebin_step<font color="#909090">=[4, 4, 2]</font>, peakheight<font color="#909090">=100</font>, disp<font color="#909090">=False</font>)</dt><dd><tt>Find&nbsp;peak&nbsp;in&nbsp;pilatus&nbsp;detector,&nbsp;within&nbsp;peakregion<br>
&nbsp;[pk_i,pk_j],frame&nbsp;=&nbsp;<a href="#-pilpeak">pilpeak</a>(vol)<br>
&nbsp;<br>
Currently&nbsp;uses&nbsp;a&nbsp;very&nbsp;basic&nbsp;search&nbsp;that&nbsp;rebins&nbsp;the&nbsp;volume&nbsp;into&nbsp;courser&nbsp;bins,<br>
averaging&nbsp;the&nbsp;intensities&nbsp;then&nbsp;finding&nbsp;the&nbsp;position&nbsp;of&nbsp;the&nbsp;max&nbsp;bin.</tt></dd></dl>
 <dl><dt><a name="-pilroi"><strong>pilroi</strong></a>(vol, ROIcen<font color="#909090">=None</font>, ROIsize<font color="#909090">=[31, 31]</font>, disp<font color="#909090">=False</font>)</dt><dd><tt>Define&nbsp;new&nbsp;ROI&nbsp;in&nbsp;Pilatus&nbsp;Detector<br>
&nbsp;ROI_sum,ROI_maxval,ROI_bkg&nbsp;=&nbsp;<a href="#-pilroi">pilroi</a>(vol,ROIcen,ROIsize)</tt></dd></dl>
 <dl><dt><a name="-pixel2hkl"><strong>pixel2hkl</strong></a>(num, detdim<font color="#909090">=[195, 487]</font>, UB<font color="#909090">=None</font>)</dt><dd><tt>Generate&nbsp;hkl&nbsp;coordinates&nbsp;of&nbsp;detector&nbsp;pixel&nbsp;positions<br>
&nbsp;&nbsp;HHH,KKK,LLL&nbsp;=&nbsp;<a href="#-pixel2hkl">pixel2hkl</a>(#/d,&nbsp;detdim,UB)<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;detdim&nbsp;=&nbsp;detector&nbsp;dimesions&nbsp;def=[195,487]&nbsp;(Pilatus&nbsp;100K)<br>
&nbsp;&nbsp;UB&nbsp;=&nbsp;orientation&nbsp;matrix,&nbsp;def=None&nbsp;(uses&nbsp;UB&nbsp;stored&nbsp;in&nbsp;metadata)<br>
&nbsp;<br>
Uses&nbsp;the&nbsp;pilatus&nbsp;parameters&nbsp;local:"pilpara"&nbsp;to&nbsp;define&nbsp;detector&nbsp;distance,&nbsp;centre&nbsp;etc.<br>
&nbsp;&nbsp;&nbsp;&nbsp;pilpara=[119.536,1904.17,44.4698,0.106948,-0.738038,412.19,-0.175,-0.175]<br>
&nbsp;<br>
Code&nbsp;copied&nbsp;and&nbsp;adapted&nbsp;from&nbsp;Alessandro's&nbsp;readpil.hklmatrix()<br>
&nbsp;<br>
Only&nbsp;works&nbsp;on&nbsp;delta,&nbsp;gam,&nbsp;eta,&nbsp;chi,&nbsp;phi&nbsp;scans&nbsp;-&nbsp;not&nbsp;energy&nbsp;or&nbsp;hkl&nbsp;scans!</tt></dd></dl>
 <dl><dt><a name="-pixel2tth"><strong>pixel2tth</strong></a>(num, detdim<font color="#909090">=[195, 487]</font>, centre_only<font color="#909090">=False</font>)</dt><dd><tt>Generate&nbsp;two-theta&nbsp;coordinates&nbsp;of&nbsp;detector&nbsp;pixel&nbsp;positions<br>
&nbsp;&nbsp;TTH,INT&nbsp;=&nbsp;<a href="#-pixel2hkl">pixel2hkl</a>(#/d,&nbsp;detdim)<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;detdim&nbsp;=&nbsp;detector&nbsp;dimesions&nbsp;def=[195,487]&nbsp;(Pilatus&nbsp;100K)<br>
&nbsp;<br>
Uses&nbsp;the&nbsp;pilatus&nbsp;parameters&nbsp;local:"pilpara"&nbsp;to&nbsp;define&nbsp;detector&nbsp;distance,&nbsp;centre&nbsp;etc.<br>
&nbsp;&nbsp;&nbsp;&nbsp;pilpara=[119.536,1904.17,44.4698,0.106948,-0.738038,412.19,-0.175,-0.175]<br>
&nbsp;<br>
To&nbsp;bin&nbsp;the&nbsp;data,&nbsp;use:&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;bin_tth,bint_int&nbsp;=&nbsp;<a href="#-bindata">bindata</a>(TTH,INT,0.01)&nbsp;<br>
&nbsp;<br>
Only&nbsp;works&nbsp;on&nbsp;delta,&nbsp;gam,&nbsp;eta,&nbsp;chi,&nbsp;phi&nbsp;scans&nbsp;-&nbsp;not&nbsp;energy&nbsp;or&nbsp;hkl&nbsp;scans!</tt></dd></dl>
 <dl><dt><a name="-pixel2xyz"><strong>pixel2xyz</strong></a>(num, detdim<font color="#909090">=[195, 487]</font>)</dt><dd><tt>Generate&nbsp;cartesian&nbsp;coordinates&nbsp;of&nbsp;detector&nbsp;pixel&nbsp;positions,&nbsp;in&nbsp;A-1<br>
&nbsp;&nbsp;XXX,YYY,ZZZ&nbsp;=&nbsp;<a href="#-pixel2xyz">pixel2xyz</a>(#/d,&nbsp;detdim)<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;detdim&nbsp;=&nbsp;detector&nbsp;dimesions&nbsp;def=[195,487]&nbsp;(Pilatus&nbsp;100K)<br>
&nbsp;<br>
Uses&nbsp;the&nbsp;pilatus&nbsp;parameters&nbsp;local:"pilpara"&nbsp;to&nbsp;define&nbsp;detector&nbsp;distance,&nbsp;centre&nbsp;etc.<br>
&nbsp;&nbsp;&nbsp;&nbsp;pilpara=[119.536,1904.17,44.4698,0.106948,-0.738038,412.19,-0.175,-0.175]<br>
&nbsp;<br>
Code&nbsp;copied&nbsp;and&nbsp;adapted&nbsp;from&nbsp;Alessandro's&nbsp;readpil.hklmatrix()<br>
&nbsp;<br>
Only&nbsp;works&nbsp;on&nbsp;delta,&nbsp;gam,&nbsp;eta,&nbsp;chi,&nbsp;phi&nbsp;scans&nbsp;-&nbsp;not&nbsp;energy&nbsp;or&nbsp;hkl&nbsp;scans!</tt></dd></dl>
 <dl><dt><a name="-plotdwn"><strong>plotdwn</strong></a>(num, save<font color="#909090">=None</font>)</dt><dd><tt>Default&nbsp;plot&nbsp;of&nbsp;I16&nbsp;data,&nbsp;<a href="#-plotscan">plotscan</a>(#),&nbsp;or&nbsp;<a href="#-plotscan">plotscan</a>(#,save=1)</tt></dd></dl>
 <dl><dt><a name="-plotpil"><strong>plotpil</strong></a>(num, cax<font color="#909090">=None</font>, varx<font color="#909090">=''</font>, imnum<font color="#909090">=None</font>, bkg_img<font color="#909090">=None</font>, ROIcen<font color="#909090">=None</font>, ROIsize<font color="#909090">=[75, 67]</font>, show_ROIbkg<font color="#909090">=False</font>, show_peakregion<font color="#909090">=False</font>, log_colors<font color="#909090">=False</font>, save<font color="#909090">=False</font>)</dt><dd><tt>Pilatus&nbsp;image&nbsp;viewer,&nbsp;<a href="#-plotpil">plotpil</a>(#)<br>
Displays&nbsp;pilatus&nbsp;image&nbsp;with&nbsp;a&nbsp;slider&nbsp;to&nbsp;looks&nbsp;throught&nbsp;the&nbsp;whole&nbsp;scan<br>
Options:<br>
&nbsp;&nbsp;num&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Scan&nbsp;number&nbsp;(0&nbsp;for&nbsp;latest&nbsp;scan)<br>
&nbsp;&nbsp;cax&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;[min,max]&nbsp;colour&nbsp;map&nbsp;cut&nbsp;offs,&nbsp;or&nbsp;None&nbsp;for&nbsp;automatic&nbsp;(Default=None)<br>
&nbsp;&nbsp;varx&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;scannable&nbsp;to&nbsp;use&nbsp;as&nbsp;slider&nbsp;axis,&nbsp;or&nbsp;None&nbsp;for&nbsp;automatic&nbsp;(Default=None)<br>
&nbsp;&nbsp;imnum&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Image&nbsp;number&nbsp;to&nbsp;start&nbsp;at&nbsp;-&nbsp;0-scanlength,&nbsp;or&nbsp;None&nbsp;for&nbsp;middle&nbsp;(Default=None)<br>
&nbsp;&nbsp;bkg_img&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;If&nbsp;not&nbsp;None,&nbsp;image&nbsp;number&nbsp;bkg_img&nbsp;will&nbsp;be&nbsp;subtracted&nbsp;from&nbsp;all&nbsp;the&nbsp;other&nbsp;images&nbsp;in&nbsp;the&nbsp;scan&nbsp;(Default=None)<br>
&nbsp;&nbsp;ROIcen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Centre&nbsp;of&nbsp;region&nbsp;of&nbsp;interest&nbsp;[-y,x],&nbsp;or&nbsp;None&nbsp;for&nbsp;pp.pil_centre&nbsp;(Default=None)<br>
&nbsp;&nbsp;ROIsize&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;Size&nbsp;of&nbsp;region&nbsp;of&nbsp;interest&nbsp;to&nbsp;plot&nbsp;[ywid,xwid]&nbsp;(Default=[75,67]-ROI2)<br>
&nbsp;&nbsp;show_ROIbkg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;If&nbsp;True,&nbsp;plots&nbsp;the&nbsp;background&nbsp;region&nbsp;of&nbsp;the&nbsp;ROI&nbsp;(Default=False)<br>
&nbsp;&nbsp;show_peakregion&nbsp;:&nbsp;If&nbsp;True,&nbsp;plots&nbsp;the&nbsp;pp.peakregion&nbsp;area&nbsp;(Default=False)<br>
&nbsp;&nbsp;save&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;If&nbsp;True,&nbsp;saves&nbsp;an&nbsp;image&nbsp;of&nbsp;the&nbsp;resulting&nbsp;figure&nbsp;to&nbsp;pp.savedir&nbsp;(Default=False)<br>
&nbsp;<br>
E.G.&nbsp;<a href="#-plotpil">plotpil</a>(0,[0,1E3],imnum=0,bkg_img=0,ROIcen=[110,242],ROIsize=[21,10],show_peakregion=True)</tt></dd></dl>
 <dl><dt><a name="-plotpilSURF"><strong>plotpilSURF</strong></a>(num, varx<font color="#909090">=''</font>, ROIcen<font color="#909090">=None</font>, wid<font color="#909090">=10</font>, save<font color="#909090">=False</font>)</dt><dd><tt>Plot&nbsp;CHI&nbsp;scans&nbsp;from&nbsp;pilatus<br>
***NOT&nbsp;COMPLETE***</tt></dd></dl>
 <dl><dt><a name="-plotpilhkl"><strong>plotpilhkl</strong></a>(num)</dt><dd><tt>Plot&nbsp;pilatus&nbsp;frames&nbsp;as&nbsp;3D&nbsp;surface&nbsp;in&nbsp;reciprocal&nbsp;space<br>
&nbsp;&nbsp;&nbsp;<a href="#-plotpilhkl">plotpilhkl</a>(num)<br>
&nbsp;<br>
pixel2hkl&nbsp;used&nbsp;to&nbsp;generate&nbsp;reciprocal&nbsp;space&nbsp;coordinates,&nbsp;using&nbsp;UB&nbsp;matrix&nbsp;stored<br>
in&nbsp;metadata.&nbsp;Detector&nbsp;position&nbsp;calibration&nbsp;defined&nbsp;by&nbsp;locals:&nbsp;pilpara<br>
&nbsp;<br>
The&nbsp;images&nbsp;are&nbsp;rebinned&nbsp;to&nbsp;allow&nbsp;fast&nbsp;plotting.</tt></dd></dl>
 <dl><dt><a name="-plotpiltth"><strong>plotpiltth</strong></a>(num, binsep<font color="#909090">=0.1</font>, centre_only<font color="#909090">=False</font>)</dt><dd><tt>Plot&nbsp;binned&nbsp;two-theta&nbsp;representation&nbsp;of&nbsp;pilatus&nbsp;frames<br>
&nbsp;&nbsp;&nbsp;<a href="#-plotpiltth">plotpiltth</a>(num,binsep,centre_only)<br>
&nbsp;&nbsp;&nbsp;&nbsp;num&nbsp;=&nbsp;scan&nbsp;number&nbsp;or&nbsp;list&nbsp;of&nbsp;scan&nbsp;numbers&nbsp;for&nbsp;muliplt&nbsp;overlaid&nbsp;plots<br>
&nbsp;&nbsp;&nbsp;&nbsp;binsep&nbsp;=&nbsp;width&nbsp;of&nbsp;bins<br>
&nbsp;&nbsp;&nbsp;&nbsp;centre_only&nbsp;=&nbsp;if&nbsp;True,&nbsp;only&nbsp;bins&nbsp;pixels&nbsp;around&nbsp;the&nbsp;centre&nbsp;of&nbsp;the&nbsp;pilatus.<br>
&nbsp;<br>
pixel2tth&nbsp;used&nbsp;to&nbsp;generate&nbsp;reciprocal&nbsp;space&nbsp;coordinates,&nbsp;using&nbsp;UB&nbsp;matrix&nbsp;stored<br>
in&nbsp;metadata.&nbsp;Detector&nbsp;position&nbsp;calibration&nbsp;defined&nbsp;by&nbsp;locals:&nbsp;pilpara</tt></dd></dl>
 <dl><dt><a name="-plotpilxyz"><strong>plotpilxyz</strong></a>(num)</dt><dd><tt>Plot&nbsp;pilatus&nbsp;frames&nbsp;as&nbsp;3D&nbsp;surface&nbsp;in&nbsp;wavevector-transfer&nbsp;space<br>
&nbsp;&nbsp;&nbsp;<a href="#-plotpilxyz">plotpilxyz</a>(num)<br>
&nbsp;<br>
pixel2xyz&nbsp;used&nbsp;to&nbsp;generate&nbsp;reciprocal&nbsp;space&nbsp;coordinates,&nbsp;using&nbsp;UB&nbsp;matrix&nbsp;stored<br>
in&nbsp;metadata.&nbsp;Detector&nbsp;position&nbsp;calibration&nbsp;defined&nbsp;by&nbsp;locals:&nbsp;pilpara<br>
&nbsp;<br>
The&nbsp;images&nbsp;are&nbsp;rebinned&nbsp;to&nbsp;allow&nbsp;fast&nbsp;plotting.</tt></dd></dl>
 <dl><dt><a name="-plotscan"><strong>plotscan</strong></a>(num<font color="#909090">=None</font>, vary<font color="#909090">=''</font>, varx<font color="#909090">=''</font>, fit<font color="#909090">=None</font>, norm<font color="#909090">=True</font>, sum<font color="#909090">=False</font>, subtract<font color="#909090">=False</font>, fits<font color="#909090">=False</font>, labels<font color="#909090">=None</font>, logplot<font color="#909090">=False</font>, diffplot<font color="#909090">=False</font>, normalise<font color="#909090">=False</font>, save<font color="#909090">=False</font>)</dt><dd><tt>Default&nbsp;plot&nbsp;of&nbsp;I16&nbsp;data,&nbsp;<a href="#-plotscan">plotscan</a>(#),&nbsp;or&nbsp;<a href="#-plotscan">plotscan</a>(#,save=True)<br>
&nbsp;<br>
Plotting&nbsp;with&nbsp;fits:&nbsp;<a href="#-plotscan">plotscan</a>(#,fit='Gauss')&nbsp;or&nbsp;<a href="#-plotscan">plotscan</a>(#,fit='Lorentz')&nbsp;or&nbsp;<a href="#-plotscan">plotscan</a>(#,fit='pVoight')<br>
&nbsp;<br>
Plotting&nbsp;multiple&nbsp;regions&nbsp;of&nbsp;interest:&nbsp;<a href="#-plotscan">plotscan</a>(#,vary=['roi2_sum','roi1_sum'])<br>
&nbsp;<br>
Subtract&nbsp;regions&nbsp;of&nbsp;interest:&nbsp;<a href="#-plotscan">plotscan</a>(#,vary=['droi[110,240,51,51','droi[110,340,51,51]],subtract=True)&nbsp;=&nbsp;droi1-droi2<br>
&nbsp;<br>
Multi-run&nbsp;plot:&nbsp;<a href="#-plotscan">plotscan</a>([#1,#2,#3,...])<br>
&nbsp;<br>
Multi-run&nbsp;plot&nbsp;with&nbsp;fits:&nbsp;<a href="#-plotscan">plotscan</a>([#1,#2,#3,...],fit='Gauss',fits=True)<br>
&nbsp;<br>
Sum&nbsp;of&nbsp;several&nbsp;scans:&nbsp;<a href="#-plotscan">plotscan</a>([#1,#2],sum=True)</tt></dd></dl>
 <dl><dt><a name="-plotscans"><strong>plotscans</strong></a>(scans<font color="#909090">=[]</font>, depvar<font color="#909090">=None</font>, vary<font color="#909090">=''</font>, varx<font color="#909090">=''</font>, fit<font color="#909090">=None</font>, norm<font color="#909090">=True</font>, logplot<font color="#909090">=False</font>, save<font color="#909090">=False</font>)</dt><dd><tt>Plot&nbsp;multiple&nbsp;scans&nbsp;of&nbsp;I16&nbsp;data,&nbsp;<a href="#-plotscans">plotscans</a>([#1,#2,...])<br>
&nbsp;<br>
Plotting&nbsp;with&nbsp;fits:&nbsp;<a href="#-plotscans">plotscans</a>([#1,#2,...],fit='Gauss'),&nbsp;fit&nbsp;can&nbsp;also&nbsp;be&nbsp;'Lorentz'&nbsp;or&nbsp;'pVoight'<br>
&nbsp;<br>
Good&nbsp;for&nbsp;plotting&nbsp;many&nbsp;scans&nbsp;as&nbsp;a&nbsp;continuous&nbsp;colormap&nbsp;is&nbsp;used&nbsp;to&nbsp;vary&nbsp;the&nbsp;line&nbsp;colours.</tt></dd></dl>
 <dl><dt><a name="-plotscans2D"><strong>plotscans2D</strong></a>(scans, depvar<font color="#909090">='Ta'</font>, vary<font color="#909090">=''</font>, varx<font color="#909090">=''</font>, norm<font color="#909090">=True</font>, logplot<font color="#909090">=False</font>, save<font color="#909090">=False</font>)</dt><dd><tt>Plot&nbsp;pcolor&nbsp;of&nbsp;multiple&nbsp;scans</tt></dd></dl>
 <dl><dt><a name="-plotscans3D"><strong>plotscans3D</strong></a>(scans, depvar<font color="#909090">='Ta'</font>, vary<font color="#909090">=''</font>, varx<font color="#909090">=''</font>, norm<font color="#909090">=True</font>, logplot<font color="#909090">=False</font>, save<font color="#909090">=False</font>)</dt><dd><tt>Plot&nbsp;3D&nbsp;eta&nbsp;scans&nbsp;of&nbsp;energy&nbsp;or&nbsp;temp&nbsp;dependence</tt></dd></dl>
 <dl><dt><a name="-plotscansSURF"><strong>plotscansSURF</strong></a>(scans, depvar<font color="#909090">='Ta'</font>, vary<font color="#909090">=''</font>, varx<font color="#909090">=''</font>, norm<font color="#909090">=True</font>, logplot<font color="#909090">=False</font>, save<font color="#909090">=False</font>)</dt><dd><tt>Plot&nbsp;surface&nbsp;of&nbsp;multiple&nbsp;scans</tt></dd></dl>
 <dl><dt><a name="-polenergy"><strong>polenergy</strong></a>(sigsig, sigpi, background<font color="#909090">=None</font>, vary<font color="#909090">=''</font>, bkg_scale<font color="#909090">=None</font>, flipping_ratio<font color="#909090">=None</font>, low_points<font color="#909090">=5</font>, save<font color="#909090">=False</font>)</dt><dd><tt>Create&nbsp;Plot&nbsp;of&nbsp;energy-polarisation&nbsp;scans&nbsp;and&nbsp;calculate&nbsp;the&nbsp;subtraction</tt></dd></dl>
 <dl><dt><a name="-polflip"><strong>polflip</strong></a>(sigsig, sigpi, fit<font color="#909090">='Gauss'</font>, output<font color="#909090">=False</font>, plot<font color="#909090">=False</font>)</dt><dd><tt>Calculate&nbsp;flipping&nbsp;ratio&nbsp;ect.</tt></dd></dl>
 <dl><dt><a name="-prend"><strong>prend</strong></a>(start<font color="#909090">=0</font>, end<font color="#909090">=None</font>)</dt><dd><tt>Calculate&nbsp;the&nbsp;end&nbsp;time&nbsp;of&nbsp;a&nbsp;run</tt></dd></dl>
 <dl><dt><a name="-pvoight"><strong>pvoight</strong></a>(x, height<font color="#909090">=1</font>, cen<font color="#909090">=0</font>, FWHM<font color="#909090">=0.5</font>, LorFrac<font color="#909090">=0.5</font>, bkg<font color="#909090">=0</font>)</dt><dd><tt>Define&nbsp;pseudo-Voight</tt></dd></dl>
 <dl><dt><a name="-q2tth"><strong>q2tth</strong></a>(qmag, energy_kev)</dt><dd><tt>Converts&nbsp;array&nbsp;of&nbsp;wavevector&nbsp;transfers&nbsp;in&nbsp;A-1&nbsp;to&nbsp;two-theta&nbsp;in&nbsp;degrees</tt></dd></dl>
 <dl><dt><a name="-read_dat_file"><strong>read_dat_file</strong></a>(filename)</dt><dd><tt>Reads&nbsp;#####.dat&nbsp;files&nbsp;from&nbsp;instrument,&nbsp;returns&nbsp;class&nbsp;instance&nbsp;containing&nbsp;all&nbsp;data<br>
Input:&nbsp;<br>
&nbsp;&nbsp;filename&nbsp;=&nbsp;string&nbsp;filename&nbsp;of&nbsp;data&nbsp;file<br>
Output:<br>
&nbsp;&nbsp;d&nbsp;=&nbsp;class&nbsp;instance&nbsp;with&nbsp;parameters&nbsp;associated&nbsp;to&nbsp;scanned&nbsp;values&nbsp;in&nbsp;the&nbsp;data&nbsp;file,&nbsp;plus:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.metadata&nbsp;-&nbsp;class&nbsp;containing&nbsp;all&nbsp;metadata&nbsp;from&nbsp;datafile<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.keys()&nbsp;-&nbsp;returns&nbsp;all&nbsp;parameter&nbsp;names<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.values()&nbsp;-&nbsp;returns&nbsp;all&nbsp;parameter&nbsp;values<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d.items()&nbsp;-&nbsp;returns&nbsp;parameter&nbsp;(name,value)&nbsp;tuples</tt></dd></dl>
 <dl><dt><a name="-readscan"><strong>readscan</strong></a>(num)</dt><dd><tt>Loads&nbsp;Diamond&nbsp;#.dat&nbsp;data&nbsp;file<br>
&nbsp;&nbsp;&nbsp;&nbsp;d=<a href="#-readscan">readscan</a>(#)<br>
&nbsp;&nbsp;&nbsp;&nbsp;d=<a href="#-readscan">readscan</a>(0)&nbsp;-&nbsp;gives&nbsp;current&nbsp;run&nbsp;data<br>
&nbsp;&nbsp;&nbsp;&nbsp;d=<a href="#-readscan">readscan</a>(-n)&nbsp;-&nbsp;gives&nbsp;previous&nbsp;run&nbsp;data<br>
&nbsp;<br>
d&nbsp;is&nbsp;a&nbsp;dataholder&nbsp;storing&nbsp;all&nbsp;scan&nbsp;data.&nbsp;For&nbsp;example:<br>
&nbsp;&nbsp;&nbsp;&nbsp;d.eta&nbsp;=&nbsp;array&nbsp;of&nbsp;eta&nbsp;values&nbsp;in&nbsp;an&nbsp;eta&nbsp;scan<br>
&nbsp;&nbsp;&nbsp;&nbsp;d.APD&nbsp;=&nbsp;array&nbsp;of&nbsp;intensities&nbsp;when&nbsp;using&nbsp;the&nbsp;APD<br>
&nbsp;&nbsp;&nbsp;&nbsp;d.roi2_sum&nbsp;=&nbsp;array&nbsp;of&nbsp;pilatus&nbsp;region&nbsp;sums&nbsp;when&nbsp;using&nbsp;this&nbsp;option<br>
d.metadata&nbsp;gives&nbsp;ancillary&nbsp;data.&nbsp;For&nbsp;example:<br>
&nbsp;&nbsp;&nbsp;&nbsp;d.metadata.cmd&nbsp;=&nbsp;scan&nbsp;command<br>
&nbsp;&nbsp;&nbsp;&nbsp;d.metadata.Ta&nbsp;=&nbsp;current&nbsp;temperature<br>
&nbsp;&nbsp;&nbsp;&nbsp;d.metadata.en&nbsp;=&nbsp;current&nbsp;energy<br>
use&nbsp;d.keys()&nbsp;or&nbsp;d.metadata.keys()&nbsp;to&nbsp;see&nbsp;all&nbsp;values</tt></dd></dl>
 <dl><dt><a name="-rebin"><strong>rebin</strong></a>(vol, step<font color="#909090">=[4, 4, 1]</font>)</dt><dd><tt>V&nbsp;=&nbsp;<a href="#-rebin">rebin</a>(volume,[4,4,1])<br>
Rebins&nbsp;the&nbsp;Pilatus&nbsp;array,&nbsp;taking&nbsp;the&nbsp;aveage&nbsp;of&nbsp;multiple&nbsp;pixels</tt></dd></dl>
 <dl><dt><a name="-recall_last_exp"><strong>recall_last_exp</strong></a>()</dt><dd><tt>Loads&nbsp;the&nbsp;last&nbsp;saved&nbsp;experiment&nbsp;&amp;&nbsp;analysis&nbsp;directories&nbsp;from&nbsp;the&nbsp;temp&nbsp;directory&nbsp;and&nbsp;sets&nbsp;filedir&nbsp;and&nbsp;savedir</tt></dd></dl>
 <dl><dt><a name="-rolling_fun"><strong>rolling_fun</strong></a>(Y, fun<font color="#909090">=&lt;function std&gt;</font>)</dt><dd><tt>Performs&nbsp;a&nbsp;rolling&nbsp;verions&nbsp;of&nbsp;the&nbsp;given&nbsp;function&nbsp;across&nbsp;and&nbsp;array<br>
&nbsp;&nbsp;<a href="#-rolling_fun">rolling_fun</a>(Y,fun)<br>
&nbsp;&nbsp;&nbsp;Y&nbsp;=&nbsp;array,&nbsp;e.g.&nbsp;[1,2,3,4]<br>
&nbsp;&nbsp;&nbsp;fun&nbsp;=&nbsp;array&nbsp;function,&nbsp;e.g.&nbsp;np.mean&nbsp;or&nbsp;np.std<br>
Returns&nbsp;an&nbsp;array,&nbsp;of&nbsp;the&nbsp;same&nbsp;length&nbsp;as&nbsp;Y,&nbsp;with&nbsp;function&nbsp;fun&nbsp;performed&nbsp;across&nbsp;every&nbsp;3&nbsp;items</tt></dd></dl>
 <dl><dt><a name="-rot3D"><strong>rot3D</strong></a>(vec, alpha<font color="#909090">=0.0</font>, beta<font color="#909090">=0.0</font>, gamma<font color="#909090">=0.0</font>)</dt><dd><tt>Rotate&nbsp;3D&nbsp;vector<br>
&nbsp;vec&nbsp;=&nbsp;<a href="#-rot3D">rot3D</a>(vec,alpha=0.,beta=0.,gamma=0.)<br>
where&nbsp;alpha&nbsp;=&nbsp;angle&nbsp;from&nbsp;X&nbsp;axis&nbsp;to&nbsp;Y&nbsp;axis&nbsp;(Yaw)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;beta&nbsp;&nbsp;=&nbsp;angle&nbsp;from&nbsp;Z&nbsp;axis&nbsp;to&nbsp;X&nbsp;axis&nbsp;(Pitch)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gamma&nbsp;=&nbsp;angle&nbsp;from&nbsp;Y&nbsp;axis&nbsp;to&nbsp;Z&nbsp;axis&nbsp;(Roll)<br>
angles&nbsp;in&nbsp;degrees<br>
In&nbsp;a&nbsp;right&nbsp;handed&nbsp;coordinate&nbsp;system.<br>
&nbsp;&nbsp;&nbsp;&nbsp;Z<br>
&nbsp;&nbsp;&nbsp;/|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<br>
&nbsp;&nbsp;&nbsp;&nbsp;|________\Y<br>
&nbsp;&nbsp;&nbsp;&nbsp;\&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_\/X</tt></dd></dl>
 <dl><dt><a name="-sav_list_add"><strong>sav_list_add</strong></a>()</dt><dd><tt>Creates/appends&nbsp;files&nbsp;in&nbsp;the&nbsp;system&nbsp;Temp&nbsp;directory&nbsp;to&nbsp;store&nbsp;previously&nbsp;used&nbsp;save&nbsp;folder</tt></dd></dl>
 <dl><dt><a name="-sav_list_get"><strong>sav_list_get</strong></a>()</dt><dd><tt>Loads&nbsp;a&nbsp;list&nbsp;of&nbsp;analysis&nbsp;directories&nbsp;used&nbsp;previously</tt></dd></dl>
 <dl><dt><a name="-saveable"><strong>saveable</strong></a>(string)</dt><dd><tt>Removes&nbsp;bad&nbsp;characters&nbsp;from&nbsp;a&nbsp;string,&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;used&nbsp;as&nbsp;a&nbsp;filename</tt></dd></dl>
 <dl><dt><a name="-savedata"><strong>savedata</strong></a>(name, x, y, dy<font color="#909090">=None</font>, header<font color="#909090">=None</font>)</dt><dd><tt>Save&nbsp;data&nbsp;as&nbsp;a&nbsp;formated&nbsp;text&nbsp;file&nbsp;in&nbsp;the&nbsp;analysis&nbsp;directory<br>
&nbsp;&nbsp;<a href="#-savedata">savedata</a>(&nbsp;name,&nbsp;x,&nbsp;y,&nbsp;dy,&nbsp;header&nbsp;)<br>
&nbsp;<br>
name&nbsp;=&nbsp;name&nbsp;of&nbsp;file,&nbsp;not&nbsp;including&nbsp;extention&nbsp;(.dat&nbsp;will&nbsp;be&nbsp;added)<br>
x,y,dy&nbsp;=&nbsp;equal&nbsp;length&nbsp;arrays,&nbsp;dy&nbsp;can&nbsp;be&nbsp;left&nbsp;out<br>
header&nbsp;=&nbsp;header&nbsp;info&nbsp;can&nbsp;be&nbsp;added&nbsp;if&nbsp;required<br>
&nbsp;<br>
Uses:&nbsp;np.savetxt(savefile,(x,y,dy),header=head)<br>
&nbsp;<br>
E.G.<br>
&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;=&nbsp;[1,2,3,4]<br>
&nbsp;&nbsp;&nbsp;&nbsp;y&nbsp;=&nbsp;[2.4,56,43,1e6]<br>
&nbsp;&nbsp;&nbsp;&nbsp;dy&nbsp;=&nbsp;np.sqrt(y)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#-savedata">savedata</a>('test',x,y,dy,header='lovely&nbsp;data')</tt></dd></dl>
 <dl><dt><a name="-saveplot"><strong>saveplot</strong></a>(name, dpi<font color="#909090">=None</font>)</dt><dd><tt>Saves&nbsp;current&nbsp;figure&nbsp;as&nbsp;a&nbsp;png&nbsp;in&nbsp;the&nbsp;savedir&nbsp;directory</tt></dd></dl>
 <dl><dt><a name="-savescan"><strong>savescan</strong></a>(num<font color="#909090">=None</font>, varx<font color="#909090">=''</font>, vary<font color="#909090">=''</font>, norm<font color="#909090">=True</font>, abscor<font color="#909090">=None</font>)</dt><dd><tt>Save&nbsp;scan&nbsp;as&nbsp;.dat&nbsp;file</tt></dd></dl>
 <dl><dt><a name="-scanabscor"><strong>scanabscor</strong></a>(num<font color="#909090">=0</font>, u<font color="#909090">=1</font>, eta_offset<font color="#909090">=0.0</font>, chi_offset<font color="#909090">=0.0</font>)</dt><dd><tt>Calculate&nbsp;absorption&nbsp;correction<br>
&nbsp;A&nbsp;=&nbsp;<a href="#-abscor">abscor</a>(num,u)</tt></dd></dl>
 <dl><dt><a name="-scanenergy"><strong>scanenergy</strong></a>(num)</dt><dd><tt>Returns&nbsp;the&nbsp;average&nbsp;energy&nbsp;of&nbsp;the&nbsp;chosen&nbsp;scan&nbsp;as&nbsp;a&nbsp;formatted&nbsp;string</tt></dd></dl>
 <dl><dt><a name="-scanfile"><strong>scanfile</strong></a>(num)</dt><dd><tt>Returns&nbsp;the&nbsp;full&nbsp;file&nbsp;name&nbsp;of&nbsp;scan&nbsp;#num</tt></dd></dl>
 <dl><dt><a name="-scanhkl"><strong>scanhkl</strong></a>(num)</dt><dd><tt>Returns&nbsp;the&nbsp;average&nbsp;HKL&nbsp;of&nbsp;the&nbsp;chosen&nbsp;scan&nbsp;as&nbsp;a&nbsp;formatted&nbsp;string</tt></dd></dl>
 <dl><dt><a name="-scanlatt"><strong>scanlatt</strong></a>(num)</dt><dd><tt>Displays&nbsp;the&nbsp;lattice&nbsp;parameters&nbsp;of&nbsp;the&nbsp;chosen&nbsp;scan</tt></dd></dl>
 <dl><dt><a name="-scantemp"><strong>scantemp</strong></a>(num, sensor<font color="#909090">=None</font>)</dt><dd><tt>Returns&nbsp;the&nbsp;average&nbsp;temperature&nbsp;of&nbsp;the&nbsp;chosen&nbsp;scan&nbsp;as&nbsp;a&nbsp;formatted&nbsp;string</tt></dd></dl>
 <dl><dt><a name="-scantitle"><strong>scantitle</strong></a>(num)</dt><dd><tt>Generate&nbsp;a&nbsp;formatted&nbsp;title&nbsp;for&nbsp;the&nbsp;current&nbsp;scan</tt></dd></dl>
 <dl><dt><a name="-scanwl"><strong>scanwl</strong></a>(num)</dt><dd><tt>Returns&nbsp;the&nbsp;initial&nbsp;wavelength&nbsp;of&nbsp;the&nbsp;given&nbsp;scan&nbsp;in&nbsp;Angstroms</tt></dd></dl>
 <dl><dt><a name="-simpfit"><strong>simpfit</strong></a>(x, y, disp<font color="#909090">=None</font>)</dt><dd><tt>Simple&nbsp;peak&nbsp;parameters</tt></dd></dl>
 <dl><dt><a name="-simpplt"><strong>simpplt</strong></a>(x, height<font color="#909090">=1</font>, cen<font color="#909090">=0</font>, FWHM<font color="#909090">=0.5</font>, bkg<font color="#909090">=0</font>)</dt><dd><tt>Plot&nbsp;an&nbsp;Illustration&nbsp;of&nbsp;simpfit</tt></dd></dl>
 <dl><dt><a name="-stfm"><strong>stfm</strong></a>(val, err)</dt><dd><tt>Create&nbsp;standard&nbsp;form&nbsp;string&nbsp;from&nbsp;value&nbsp;and&nbsp;uncertainty"<br>
&nbsp;str&nbsp;=&nbsp;<a href="#-stfm">stfm</a>(val,err)<br>
&nbsp;Examples:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'35.25&nbsp;(1)'&nbsp;=&nbsp;<a href="#-stfm">stfm</a>(35.25,0.01)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'110&nbsp;(5)'&nbsp;=&nbsp;<a href="#-stfm">stfm</a>(110.25,5)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'0.0015300&nbsp;(5)'&nbsp;=&nbsp;<a href="#-stfm">stfm</a>(0.00153,0.0000005)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'1.56(2)E+6'&nbsp;=&nbsp;<a href="#-stfm">stfm</a>(1.5632e6,1.53e4)</tt></dd></dl>
 <dl><dt><a name="-straightline"><strong>straightline</strong></a>(x, grad<font color="#909090">=1.0</font>, inter<font color="#909090">=0.0</font>)</dt><dd><tt>Staigh&nbsp;line</tt></dd></dl>
 <dl><dt><a name="-tth2d"><strong>tth2d</strong></a>(tth, energy_kev)</dt><dd><tt>Converts&nbsp;two-theta&nbsp;array&nbsp;in&nbsp;degrees&nbsp;to&nbsp;d-spacing&nbsp;in&nbsp;A</tt></dd></dl>
 <dl><dt><a name="-tth2q"><strong>tth2q</strong></a>(tth, energy_kev)</dt><dd><tt>Converts&nbsp;two-theta&nbsp;array&nbsp;in&nbsp;degrees&nbsp;to&nbsp;wavevector&nbsp;transfer,&nbsp;Q&nbsp;in&nbsp;A-1</tt></dd></dl>
</td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#55aa55">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Data</strong></big></font></td></tr>
    
<tr><td bgcolor="#55aa55"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><strong>datfile_format</strong> = '%i.dat'<br>
<strong>default_sensor</strong> = 'Ta'<br>
<strong>detectors</strong> = ['APD', 'sum', 'maxval']<br>
<strong>dont_normalise</strong> = ['Ta', 'Tb', 'Tc', 'Td', 'ic1monitor', 'rc', 'Cmes', 'Vmes', 'Rmes']<br>
<strong>exp_monitor</strong> = 800.0<br>
<strong>exp_ring_current</strong> = 300.0<br>
<strong>exp_title</strong> = ''<br>
<strong>filedir</strong> = '/dls/i16/data/2017'<br>
<strong>hot_pixel</strong> = 1048476<br>
<strong>normby</strong> = 'rc'<br>
<strong>peakregion</strong> = [7, 153, 186, 332]<br>
<strong>pil_centre</strong> = [104, 205]<br>
<strong>pil_max_size</strong> = 544630784.0<br>
<strong>pilatus_dead_pixels</strong> = array([], shape=(0L, 2L), dtype=int32)<br>
<strong>pilpara</strong> = [119.536, 1904.17, 44.4698, 0.106948, -0.738038, 412.19, -0.175, -0.175]<br>
<strong>plot_colors</strong> = ['b', 'g', 'm', 'c', 'y', 'k', 'r']<br>
<strong>print_function</strong> = _Feature((2, 6, 0, 'alpha', 2), (3, 0, 0, 'alpha', 0), 65536)<br>
<strong>psutil</strong> = &lt;module 'psutil' from 'C:\Anaconda\lib\site-packages\psutil\__init__.pyc'&gt;<br>
<strong>savedir</strong> = '/home/i16user/Desktop'</td></tr></table>
</body></html>